"use strict";function AboutService(t){var e={show:!1,ingroup:!1,stick:!1};return t.getConfig("about").then(function(t){e.items=t}),{getState:function(){return e}}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}AboutService.$inject=["configService"],angular.module("bathy.about",[]).directive("bathyAbout",["$interval","aboutService",function(t,e){return{templateUrl:"bathy/about/about.html",scope:{},link:function(n,a){var r=void 0;n.about=e.getState(),n.over=function(){t.cancel(r),n.about.ingroup=!0},n.out=function(){r=t(function(){n.about.ingroup=!1},1e3)},n.unstick=function(){n.about.ingroup=n.about.show=n.about.stick=!1,a.find("a").blur()}}}}]).directive("bathyAboutLink",["$interval","aboutService",function(t,e){return{restrict:"AE",templateUrl:"bathy/about/button.html",scope:{},link:function(n){var a=void 0;n.about=e.getState(),n.over=function(){t.cancel(a),n.about.show=!0},n.toggleStick=function(){n.about.stick=!n.about.stick,n.about.stick||(n.about.show=n.about.ingroup=!1)},n.out=function(){a=t(function(){n.about.show=!1},700)}}}}]).factory("aboutService",AboutService),angular.module("bathy.bounds",[]).directive("bathyBounds",["flashService","messageService","boundsService",function(t,e,n){var a=void 0;return{restrict:"AE",link:function(){n.init().then(null,null,function(n){switch(t.remove(a),n.type){case"error":case"warn":case"info":e[n.type](n.text);break;default:t.remove(a),a=t.add(n.text,n.duration?n.duration:8e3,"wait"===n.type)}})}}}]).factory("boundsService",["$http","$q","$rootScope","$timeout","configService","flashService",function(t,e,n,a,r,i){function o(t,e,n){f&&f.notify({text:t,type:e,duration:n})}function s(t){var n=e.defer(),r=u(t);if(r&&r.code)switch(r.code){case"oversize":a(function(){o("","clear"),o("The selected area is too large to process. Please restrict to approximately 2 degrees square.","error"),n.resolve(r)});break;case"undersize":a(function(){o("","clear"),o("X Min and Y Min should be smaller than X Max and Y Max, respectively. Please update the drawn area.","error"),n.resolve(r)});break;default:return e.when(r)}return n.promise}function l(t){var e=(t.xMax-t.xMin)*(t.yMax-t.yMin);return e<1e-11||t.xMax<t.xMin}function c(t){var e=Math.abs((t.xMax-t.xMin)*(t.yMax-t.yMin));return e>2e3}function d(t){t.xMax=null===t.xMax?null:+t.xMax,t.xMin=null===t.xMin?null:+t.xMin,t.yMax=null===t.yMax?null:+t.yMax,t.yMin=null===t.yMin?null:+t.yMin}function u(t){return d(t),c(t)?{code:"oversize"}:l(t)?{code:"undersize"}:null===t.xMax?{code:"incomplete"}:p(t)?{code:"success"}:{code:"invalid"}}function p(t){return t&&angular.isNumber(t.xMax)&&angular.isNumber(t.xMin)&&angular.isNumber(t.yMax)&&angular.isNumber(t.yMin)&&!c(t)&&!l(t)}function h(e){r.getConfig("processing").then(function(a){var r=a.intersectsUrl;if(r){var i=r.replace("{maxx}",e.xMax).replace("{minx}",e.xMin).replace("{maxy}",e.yMax).replace("{miny}",e.yMin);o("Checking there is data in your selected area...","wait",18e4),t.get(i).then(function(t){if(t.data&&t.data.available_data){var e="There is no data held in your selected area. Please try another area.";o("","clear"),t.data.available_data&&t.data.available_data.forEach(function(t){t.downloadables&&(e="There is intersecting data. Select downloads from the list.")}),o(e,null,4e3),n.$broadcast("site.selection",t.data)}},function(t){o("The service that provides the list of datasets is currently unavailable. Please try again later.","error")})}})}var f=void 0;return{init:function(){return f=e.defer(),n.$on("bathy.clip.drawn",function(t,e){o("Area drawn. Checking for data..."),s(e).then(function(t){"success"===t.code?(n.$broadcast("bathy.bounds.draw",[e.xMin,e.yMin,e.xMax,e.yMax]),h(e)):n.$broadcast("bathy.clip.draw",{message:"oversize"})})}),f.promise},cancelDraw:function(){drawService.cancelDrawRectangle()},checkSize:function(t){return s(t)}}}]),angular.module("bathy.autoscroll",[]).directive("autoScroll",["$timeout","$rootScope",function(t,e){return{scope:{trigger:"@",y:"@",height:"@"},link:function(n,a,r){var i,o,s;s=n.height?+n.height:100,o=s,a.on("scroll",function(l){var c,d,u=a.scrollTop(),p=a.find(r.autoScroll),h=p.height(),f=a.height();f>=h||(c=h-u-f,d=o<c,o=c,c<s&&!d&&(i&&t.cancel(i),i=t(function(){e.$broadcast(n.trigger)},30)))})}}}]);var ExtentService=function t(e,n){function a(){e.getMap().then(function(t){t.on("moveend",r),t.on("zoomend",r),r()})}function r(){e.getMap().then(function(t){var e=t.getBounds();i.yMin=e.getSouth(),i.xMin=e.getWest(),i.yMax=e.getNorth(),i.xMax=e.getEast(),n.refresh()})}_classCallCheck(this,t);var i=n.getSearchCriteria().bbox;return i.fromMap&&a(),{getParameters:function(){return i}}};ExtentService.$inject=["mapService","searchService"],angular.module("bathy.extent",["explorer.switch"]).directive("bathyExtent",["extentService",function(t){return{restrict:"AE",templateUrl:"bathy/extent/extent.html",controller:["$scope",function(e){e.parameters=t.getParameters()}],link:function(t,e,n){}}}]).factory("extentService",ExtentService);var RootCtrl=function e(t,n){var a=this;_classCallCheck(this,e),n.getMap().then(function(t){a.map=t}),t.getConfig().then(function(t){a.data=t})};RootCtrl.$invoke=["configService","mapService"],angular.module("BathyApp",["explorer.config","explorer.confirm","explorer.enter","explorer.flasher","explorer.googleanalytics","explorer.info","explorer.message","explorer.modal","explorer.persist","explorer.projects","explorer.version","exp.ui.templates","explorer.map.templates","ui.bootstrap","ngAutocomplete","ngRoute","ngSanitize","page.footer","geo.baselayer.control","geo.draw","geo.map","geo.maphelper","geo.measure","bathy.autoscroll","bathy.about","bathy.bounds","bathy.clip","bathy.datasets","bathy.extent","bathy.header","bathy.maps","bathy.panes","bathy.plot","bathy.popover","bathy.reset","bathy.restrict.pan","bathy.select","bathy.side-panel","bathy.splash","bathy.start","bathy.templates","bathy.toolbar"]).config(["configServiceProvider","persistServiceProvider","projectsServiceProvider","versionServiceProvider",function(t,e,n,a){t.location("bathy/resources/config/config.json?v=4"),t.dynamicLocation("bathy/resources/config/configclient.json?"),a.url("bathy/assets/package.json"),e.handler("local"),n.setProject("bathy")}]).controller("RootCtrl",RootCtrl).filter("bytes",function(){return function(t,e){if(isNaN(parseFloat(t))||!isFinite(t))return"-";"undefined"==typeof e&&(e=0);var n=["bytes","kB","MB","GB","TB","PB"],a=Math.floor(Math.log(t)/Math.log(1024));return(t/Math.pow(1024,Math.floor(a))).toFixed(e)+" "+n[a]}}).factory("userService",[function(){function t(){return!0}return{login:t,hasAcceptedTerms:t,setAcceptedTerms:t,getUsername:function(){return"anon"}}}]),"every"in Array.prototype||(Array.prototype.every=function(t,e){for(var n=0,a=this.length;n<a;n++)if(n in this&&!t.call(e,this[n],n,this))return!1;return!0}),Array.from||(Array.from=function(){var t=Object.prototype.toString,e=function(e){return"function"==typeof e||"[object Function]"===t.call(e)},n=function(t){var e=Number(t);return isNaN(e)?0:0!==e&&isFinite(e)?(e>0?1:-1)*Math.floor(Math.abs(e)):e},a=Math.pow(2,53)-1,r=function(t){var e=n(t);return Math.min(Math.max(e,0),a)};return function(t){var n=this,a=Object(t);if(null===t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var i,o=arguments.length>1?arguments[1]:void 0;if("undefined"!=typeof o){if(!e(o))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(i=arguments[2])}for(var s,l=r(a.length),c=e(n)?Object(new n(l)):new Array(l),d=0;d<l;)s=a[d],o?c[d]="undefined"==typeof i?o(s,d):o.call(i,s,d):c[d]=s,d+=1;return c.length=l,c}}());var MapsCtrl=function n(t,e,a,r){_classCallCheck(this,n);L.layerGroup([]),{download:r.getLayerGroup(),select:a.getLayerGroup()}};MapsCtrl.$inject=["$rootScope","mapService","selectService","downloadService"],angular.module("bathy.groups",[]).factory("GroupsCtrl",MapsCtrl);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),MapsCtrl=function(){function t(e){_classCallCheck(this,t),this.mapService=mapService}return _createClass(t,[{key:"toggleLayer",value:function(t){this.mapsService.toggleShow(t)}}]),t}();MapsCtrl.$inject=["mapsService"];var MapsService=function(){function t(e,n){_classCallCheck(this,t),this.CONFIG_KEY="layersTab",this.configService=e,this.mapService=n,this.configService=e}return _createClass(t,[{key:"getConfig",value:function(){return this.configService.getConfig(this.CONFIG_KEY)}},{key:"toggleShow",value:function(t,e){var n=this;this.configService.getConfig(this.CONFIG_KEY).then(function(e){t.layer?(t.displayed=!1,n.mapService.removeFromGroup(t,e.group)):(n.mapService.addToGroup(t,e.group),t.displayed=!0)})}}]),t}();MapsService.$inject=["configService","mapService"],angular.module("bathy.maps",["explorer.layer.slider"]).directive("bathyMaps",["mapsService",function(t){return{templateUrl:"bathy/maps/maps.html",link:function(e){t.getConfig().then(function(t){e.layersTab=t})}}}]).controller("MapsCtrl",MapsCtrl).service("mapsService",MapsService),angular.module("bathy.panes",[]).directive("bathyPanes",["$rootScope","$timeout","mapService",function(t,e,n){return{templateUrl:"bathy/panes/panes.html",scope:{defaultItem:"@",data:"="},controller:["$scope",function(a){var r=!1;a.view=a.defaultItem,t.$on("side.panel.change",function(t){function n(){var t=document.createEvent("HTMLEvents");t.initEvent("resize",!1,!0),window.dispatchEvent(t)}n(),e(n,100),e(n,200),e(n,300),e(n,500)}),a.setView=function(e){var i=a.view,o=0;a.view===e?(e&&(r=!0,o=1e3),a.view=""):(e||(r=!0),a.view=e),t.$broadcast("view.changed",a.view,i),r&&n.getMap().then(function(t){t._onResize()})},e(function(){t.$broadcast("view.changed",a.view,null)},50)}]}}]),angular.module("bathy.header",[]).controller("headerController",["$scope","$q","$timeout",function(t,e,n){var a=function(t){return t};t.$on("headerUpdated",function(e,n){t.headerConfig=a(n)})}]).directive("bathyHeader",[function(){var t={heading:"ICSM",headingtitle:"ICSM",helpurl:"help.html",helptitle:"Get help about ICSM",helpalttext:"Get help about ICSM",skiptocontenttitle:"Skip to content",skiptocontent:"Skip to content",quicklinksurl:"/search/api/quickLinks/json?lang=en-US"};return{transclude:!0,restrict:"EA",templateUrl:"bathy/header/header.html",scope:{breadcrumbs:"=",heading:"=",headingtitle:"=",helpurl:"=",helptitle:"=",helpalttext:"=",skiptocontenttitle:"=",skiptocontent:"=",quicklinksurl:"="},link:function(e,n,a){angular.copy(t);angular.forEach(t,function(t,n){n in e||(e[n]=t)})}}}]).factory("headerService",["$http",function(){}]),angular.module("bathy.plot",[]).directive("bathyPlot",["$log",function(t){return{restrict:"AE",scope:{line:"="},link:function(e,n,a,r){e.$watch("line",function(e,n){t.info(e)})}}}]),angular.module("bathy.popover",[]).directive("bathyPopover",[function(){return{templateUrl:"bathy/popover/popover.html",restrict:"A",transclude:!0,scope:{closeOnEscape:"@",show:"=",containerClass:"=",direction:"@"},link:function(t,e){function n(e){27===e.which&&(e.stopPropagation(),e.preventDefault(),t.$apply(function(){t.show=!1}))}t.direction||(t.direction="bottom"),!t.closeOnEscape||t.closeOnEscape!==!0&&"true"!==t.closeOnEscape||e.on("keyup",n)}}}]),angular.module("bathy.reset",[]).directive("resetPage",function(t){return{restrict:"AE",scope:{},templateUrl:"bathy/reset/reset.html",controller:["$scope",function(e){e.reset=function(){t.location.reload()}}]}});var servicesFactory=function(t){function e(t){this.uris=t,this.container={wms:null},t?this.services=t.map(function(t){var e=new n(t);return this.container.wms=e.isWms()?e:this.container.wms,e}.bind(this)):this.services=[],this.hasWms=function(){return null!==this.container.wms},this.getWms=function(){return this.container.wms},this.remove=function(){this.services.forEach(function(t){t.remove()})}}function n(t){var e=$(t);this.protocol=e.attr("protocol"),this.url=e.text(),this.layerNames=e.attr("layerNames"),this.name=e.attr("name"),this.description=e.attr("description"),this.handlers=[],this.isWfs=function(){return this.protocol===a.WFS},this.isWms=function(){return this.protocol===a.WMS},this.isSupported=function(){return"undefined"==typeof a[this.protocol]},this.addHandler=function(t){this.handlers.push(t)},this.removeHandler=function(t){this.handlers.push(t)},this.remove=function(){this.handlers.forEach(function(t){this.callback.remove&&t.remove(this)}.bind(this)),this.handlers=[]}}var a={WFS:"OGC:WFS",WMS:"OGC:WMS"};return n.prototype={getUrl:function(){return url?url.indexOf("?")<0?void 0:url.substr(0,url.indexOf("?")):null}},new e(t)},SelectService=function(t,e,n,a,r,i){function o(){a(function(){f._executeQuery()},100)}var s,l="Search Layers",c="bathy/resources/config/select.json",d={text:"",daterange:{enabled:!1,upper:null,lower:null},bbox:{fromMap:!0,intersects:!0,yMax:null,yMin:null,xMax:null,xMin:null},defaultKeywords:[],keywords:[]},u={},p="#ff7800",h="darkblue",f={getSelectCriteria:function(){return d},getLayerGroup:function(){return s||(s=r.getGroup(l)),s},setKeywords:function(t){},setFilter:function(t){},refresh:function(){},getDaterange:function(){return d.daterange},more:function(){},_executeQuery:function(){t.get(c,{cache:!0}).then(function(t){f.getLayerGroup();var e=t.data;e.response.docs.forEach(function(t){f._decorateDataset(t),"group"===t.type&&t.docs.forEach(function(t){f._decorateDataset(t)})}),n.$broadcast("select.facet.counts",e),n.$broadcast("select.results.received",e)})},createLayer:function(t,e){var n,a,r,i=t.bbox,o=t.primaryId;if(r=u[o],!r){if(!i)return null;if(n=i.split(" "),4!==n.length)return null;e||(e=p),a=[[+n[1],+n[0]],[+n[3],+n[2]]],r=L.rectangle(a,{fill:!1,color:"#000000",width:3,clickable:!1}),u[o]=r}return this._decorateDataset(t),s.addLayer(r),r},_decorateDataset:function(t){function e(t){var e;return t?(e=t.split(/\s/g),{xMin:+e[0],xMax:+e[2],yMax:+e[3],yMin:+e[1]}):null}var n=u[t.primaryId];n?(t.layer=n,t.showLayer=!0):(t.layer=null,t.showLayer=!1,t.services=servicesFactory(t.dcUris),t.bounds=e(t.bbox))},showWithin:function(t){function e(t,e,n,a){var r=d.bbox;return t>r.xMin&&n<r.xMax&&e>r.yMin&&a<r.yMax}t.forEach(function(t){var n,a=t.bbox;a?(n=a.split(" "),4===n.length&&e(+n[0],+n[1],+n[2],+n[3])?f.createLayer(t):f.removeLayer(t)):f.removeLayer(t)})},toggle:function(t){t.showLayer?this.removeLayer(t):this.createLayer(t)},toggleAll:function(t){var e=this,n=t.some(function(t){return!t.showLayer});return t.forEach(function(t){n?t.showLayer||e.createLayer(t):t.showLayer&&e.removeLayer(t)}),!n},hideAll:function(t){t.forEach(function(t){t.showLayer&&f.removeLayer(t)})},hilight:function(t){t.setStyle({color:h})},lolight:function(t){t.setStyle({color:p})},removeLayer:function(t){var e=t.primaryId,n=u[e];n&&(s.removeLayer(n),delete u[e]),this._decorateDataset(t)}};return o(),f};SelectService.$inject=["$http","$q","$rootScope","$timeout","mapService","configService"],angular.module("bathy.select.service",[]).factory("selectService",SelectService);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),SelectCtrl=function(){function t(e,n,a,r){var i=this;_classCallCheck(this,t),this.flashService=a,this.selectService=r,e.$on("select.results.received",function(t,e){a.remove(i.flasher),i.data=e}),n.getConfig("facets").then(function(t){i.hasKeywords=t&&t.keywordMapped&&t.keywordMapped.length>0})}return _createClass(t,[{key:"select",value:function(){this.flashService.remove(this.flasher),this.flasher=this.flashService.add("Selecting",3e3,!0),this.selectService.setFilter(this.filter)}},{key:"toggle",value:function(t){this.selectService.toggle(t)}},{key:"toggleAll",value:function(){this.selectService.toggleAll(this.data.response.docs)}},{key:"showWithin",value:function(){this.selectService.showWithin(this.data.response.docs)}},{key:"allShowing",value:function(){return!(!this.data||!this.data.response)&&!this.data.response.docs.some(function(t){return!t.showLayer})}},{key:"anyShowing",value:function(){return!(!this.data||!this.data.response)&&this.data.response.docs.some(function(t){return t.showLayer})}},{key:"hideAll",value:function(){this.selectService.hideAll(this.data.response.docs)}},{key:"hilight",value:function(t){t.layer&&this.selectService.hilight(t.layer)}},{key:"lolight",value:function(t){t.layer&&this.selectService.lolight(t.layer)}}]),t}();SelectCtrl.$inject=["$rootScope","configService","flashService","selectService"];var SelectCriteriaCtrl=function(){function t(e){_classCallCheck(this,t),this.criteria=e.getSelectCriteria(),this.selectService=e}return _createClass(t,[{key:"refresh",value:function(){selectService.refresh()}}]),t}();SelectCriteriaCtrl.$inject=["selectService"],angular.module("bathy.select",["bathy.select.service"]).controller("SelectCtrl",SelectCtrl).controller("SelectCriteriaCtrl",SelectCriteriaCtrl).directive("bathySelect",[function(){return{templateUrl:"bathy/select/select.html",link:function(t,e,n){console.log("Hello select!")}}}]).directive("selectDoc",[function(){return{templateUrl:"bathy/select/doc.html",link:function(t,e,n){console.log("What's up doc!")}}}]).directive("selectGroup",[function(){return{templateUrl:"bathy/select/group.html",scope:{group:"="},link:function(t,e,n){console.log("What's up doc!")}}}]).filter("pubDate",function(){return function(t){var e;return t?(e=new Date(t),e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()):"-"}}).filter("authors",function(){return function(t){return t?t.join(", "):"-"}}).filter("truncate",function(){return function(t,e){return t&&t.length>e-3?t.substr(0,e-3)+"...":t}}),angular.module("bathy.side-panel",[]).factory("panelSideFactory",["$rootScope","$timeout",function(t,e){function n(t,e){var n=t.active;return n===e?(t.active=null,t.width=0):t.active=e,!n}var a={left:{active:null,width:0},right:{active:null,width:0}};return{state:a,setLeft:function(t){var e=n(a.left,t);return e&&(a.left.width=320),e},setRight:function(e){a.right.width=e.width;var r=n(a.right,e.name);return t.$broadcast("side.panel.change",{side:"right",data:a.right,width:e.width}),r}}}]).directive("sidePanelRightOppose",["panelSideFactory",function(t){return{restrict:"E",transclude:!0,template:'<div class="contentContainer" ng-attr-style="right:{{right.width}}"><ng-transclude></ng-transclude></div>',link:function(e){e.right=t.state.right}}}]).directive("sidePanelRight",["panelSideFactory",function(t){return{restrict:"E",transclude:!0,templateUrl:"bathy/side-panel/side-panel-right.html",link:function(e){e.right=t.state.right,e.closePanel=function(){t.setRight({name:null,width:0})}}}}]).directive("panelTrigger",["panelSideFactory",function(t){return{restrict:"E",transclude:!0,templateUrl:"bathy/side-panel/trigger.html",scope:{"default":"@?",panelWidth:"@",name:"@",iconClass:"@",panelId:"@"},link:function(e){e.toggle=function(){t.setRight({width:e.panelWidth,name:e.panelId})},e["default"]&&t.setRight({width:e.panelWidth,name:e.panelId})}}}]).directive("sidePanelLeft",["panelSideFactory",function(t){return{restrict:"E",transclude:!0,templateUrl:"bathy/side-panel/side-panel-left.html",link:function(e){e.left=t.state.left,e.closeLeft=function(){t.setLeft(null)}}}}]),angular.module("bathy.splash",["ui.bootstrap.modal"]).directive("bathySplash",["$rootScope","$uibModal","$log","splashService",function(t,e,n,a){return{controller:["$scope","splashService",function(t,e){t.acceptedTerms=!0,e.getReleaseNotes().then(function(n){t.releaseMessages=n,t.acceptedTerms=e.hasViewedSplash()})}],link:function(r,i){var o;r.$watch("acceptedTerms",function(t){t===!1&&(o=e.open({templateUrl:"bathy/splash/splash.html",size:"lg",backdrop:"static",keyboard:!1,controller:["$scope","acceptedTerms","messages",function(t,e,n){t.acceptedTerms=e,t.messages=n,t.accept=function(){o.close(!0)}}],resolve:{acceptedTerms:function(){return r.acceptedTerms},messages:function(){return r.releaseMessages}}}),o.result.then(function(t){n.info("Accepted terms"),r.acceptedTerms=t,a.setHasViewedSplash(t)},function(){n.info("Modal dismissed at: "+new Date)}))}),t.$on("logoutRequest",function(){userService.setAcceptedTerms(!1)})}}}]).factory("splashService",["$http",function(t){function e(t){t?sessionStorage.setItem(a,!0):sessionStorage.removeItem(a)}function n(){return!!sessionStorage.getItem(a)}var a="bathy.accepted.terms",r="bathy/resources/config/releasenotes.json";return{getReleaseNotes:function(){return t({method:"GET",url:r+"?t="+Date.now()}).then(function(t){return t.data})},hasViewedSplash:n,setHasViewedSplash:e}}]).filter("priorityColor",[function(){var t={IMPORTANT:"red",HIGH:"blue",MEDIUM:"orange",LOW:"gray"};return function(e){return e in t?t[e]:"black"}}]).filter("wordLowerCamel",function(){return function(t){return t.charAt(0)+t.substr(1).toLowerCase()}}).filter("sortNotes",[function(){return function(t){if(t){var e=t.slice(0).sort(function(t,e){return t.priority==e.priority?t.lastUpdate==e.lastUpdate?0:e.lastUpdate-t.lastUpdate:"IMPORTANT"==t.priority?-11:1});return e}}}]),angular.module("bathy.restrict.pan",[]).directive("restrictPan",["mapService",function(t){return{restrict:"AE",scope:{bounds:"="},link:function(e){t.getMap().then(function(t){var n=e.bounds,a=n[0],r=n[1],i=L.latLng(a[0],a[1]),o=L.latLng(r[0],r[1]),s=L.latLngBounds(i,o);t.setMaxBounds(s),t.on("drag",function(){t.panInsideBounds(s,{animate:!1})})})}}}]),angular.module("bathy.toolbar",[]).directive("bathyToolbar",[function(){return{templateUrl:"bathy/toolbar/toolbar.html",controller:"toolbarLinksCtrl",transclude:!0}}]).controller("toolbarLinksCtrl",["$scope","configService",function(t,e){var n=this;e.getConfig().then(function(t){n.links=t.toolbarLinks}),t.item="",t.toggleItem=function(e){t.item=t.item===e?"":e}}]),angular.module("bathy.reviewing",[]).directive("bathyReview",["$rootScope","$uibModal","$log","messageService","reviewService",function(t,e,n,a,r){return{controller:["$scope",function(t,e){}],link:function(t,i){var o;t.data=r.data,t.$watch("data.reviewing",function(i){i&&(o=e.open({templateUrl:"download/reviewing/reviewing.html",size:"lg",backdrop:"static",keyboard:!1,controller:["$scope","$uibModalInstance","products","clip",function(t,e,n,a){t.clip=a,t.products=n,t.accept=function(){e.close(!0)},t.isValid=function(){var t=this.data,e=n.filter(function(t){return!t.removed}).length&&t.email&&t.outFormat;return e},t.countAccepted=function(){return n.filter(function(t){return!t.removed}).length},t.cancel=function(){e.close(!1)},t.noneSelected=function(t){return!t.some(function(t){return!t.removed})}}],resolve:{products:function(){return r.data.downloads},clip:function(){return r.data.clip}}}),o.result.then(function(e){e?r.startExtract().then(function(e){a[e.status](e.message),r.removeRemoved(),t.data.reviewing=!1}):t.data.reviewing=!1},function(){n.info("Cancelled")}))})}}}]).directive("reviewEmail",["reviewService",function(t){return{template:'<div class="input-group"><span class="input-group-addon" id="nedf-email">Email</span><input required="required" type="email" ng-model="data.email" class="form-control" placeholder="Email address to send download link" aria-describedby="nedf-email"></div>',restrict:"AE",link:function(e,n){e.data=t.data}}}]).filter("sizeAcceptedProducts",[function(){return function(t){return(t?t:[]).filter(function(t){return!t.removed}).reduce(function(t,e){return t+ +e.download.file_size},0)}}]).filter("withinClip",[function(){return function(t,e){return e?(t?t:[]).filter(function(t){return!t.extent||t.extent.xMax>=e.xMax&&t.extent.xMin<=e.xMin&&t.extent.yMax>=e.yMax&&t.extent.yMin<=e.yMin}):[]}}]).factory("reviewService",["$http","clipService","configService","persistService",function(t,e,n,a){var r="bathy_download_email",i={data:{},setDownloads:function(t){this.data.downloads=t.map(function(t){return{download:t,removed:!1}}),this.data.reviewing=!0,this.data.clip=e.data.clip},startExtract:function(){var n=e.data.clip,a=this.data.config;this.setEmail(this.data.email);var r={selected:[],parameters:{xmin:n.xMin,xmax:n.xMax,ymin:n.yMin,ymax:n.yMax,email:this.data.email,output_format:this.data.outFormat.code}},i=r.selected,o={};this.data.downloads.filter(function(t){return!t.removed}).forEach(function(t){var e=t.download,n=e.parent,a=n.dataType;if("mosaic"===n.type)i.push({data_type:a,files:{format:e.format,file_name:e.file_name,file_url:"",file_size:"",file_last_modified:""}});else{var r=o[a];r||(r=o[a]={data_type:a,files:[]},i.push(r));var s=r.files;s.push({format:e.format,file_name:e.file_name,file_url:e.file_url,file_size:e.file_size,file_last_modified:e.file_last_modified})}});return this.data.downloads.forEach(function(t){t.download.selected=t.removed=!1}),t({method:"POST",url:a.processingUrl,data:r,headers:{"Content-Type":"application/json"}}).then(function(t){return{status:"success",message:"Your job has been submitted. Note that you will receive an email once the job is complete and that it may take a few hours depending on the size of the dataset."}},function(t){return{status:"error",message:"Sorry but the service failed to respond. Try again later."}})},removeRemoved:function(){this.data.downloads.forEach(function(t){t.removed=!1})},setEmail:function(t){this.data.email=t,a.setItem(r,t)}};return a.getItem(r).then(function(t){i.data.email=t}),n.getConfig("processing").then(function(t){i.data.config=t}),i}]);var reduceToSelected=function(t,e){return(t?t:[]).filter(function(t){return t.parent.intersects}).filter(function(t){return t.selected}).filter(function(t){return e.some(function(e){return e.name===t.format&&e.selected})})};angular.module("bathy.datasets.controls",["bathy.datasets.type","bathy.reviewing"]).directive("datasetsControls",["reviewService",function(t){return{templateUrl:"download/datasets/controls.html",restrict:"AE",scope:{datasets:"="},link:function(e){e.review=function(){t.setDownloads(e.selectedDownloadables())},e.hasSelectedDownloadables=function(){var t=e.datasets;return reduceToSelected(t.list,t.formats).length>0},e.selectedDownloadables=function(){var t=e.datasets;return reduceToSelected(t.list,t.formats)},e.sizeSelectedDownloadables=function(){var t=e.datasets;return reduceToSelected(t.list,t.formats).reduce(function(t,e){return t+ +e.file_size},0)}}}}]).filter("selectedDownloadables",[function(){return function(t,e){return reduceToSelected(t,e)}}]).filter("hasSelectedDownloadables",[function(){return function(t,e){return reduceToSelected(t,e).length>0}}]);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),DatasetsService=function(){function t(e,n,a,r){var i=this;_classCallCheck(this,t),this.$http=e,this.mapService=r,this._data={active:"groups"},a.getConfig().then(function(t){i.config=t,i.getDatasets().then(function(t){i._data.types=t.data.available_data,i.makeList(),i.showTiles()})})}return _createClass(t,[{key:"setBounds",value:function(t){var e=this;this._data.list.forEach(function(t){return t.selected=!1}),this._data.bounds=t;var n=t[2],a=t[3],r=t[0],i=t[1],o=1,s=0,l=[r,i,n,a];this._data.tiles.forEach(function(t){var e=void 0;if("mosaic"===t.type){var c={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:t.polygon}},d=turf.bboxClip(c,l);e=!!d.geometry.coordinates.length,t.clipped=e?d.geometry.coordinates[0].map(function(t){return[t[1],t[0]]}):null}else{var u=t.bbox[0],p=t.bbox[1];e=u[o]<n&&p[o]>r&&u[s]<a&&p[s]>i}t.intersects=e,t.downloadables.forEach(function(e){e.selected&=t.intersects})}),this.bounds=[[i,r],[a,n]],this.rectangle?this.bounds&&this.rectangle.setBounds(this.bounds):this.mapService.getMap().then(function(t){e.rectangle=L.rectangle(e.bounds,{color:"#f80",weight:2}),e.rectangle.addTo(t)})}},{key:"zoom",value:function(t){var e=this;this.mapService.getMap().then(function(n){var a=void 0;if("mosaic"===t.type&&e.rectangle)return void(a=n.fitBounds(e.rectangle.getBounds()));a=t.bbox;var r=a[1][1],i=a[0][1],o=r-i,s=a[1][1]+o,l=[a[0],[a[1][0],s<180?s:180]];n.fitBounds(l,{animate:!0,padding:[80,80]})})}},{key:"show",value:function(t){var e=this;this.mapService.getMap().then(function(n){e._showDataset&&(n.removeLayer(e._showDataset),e._showDataset=null),t&&("mosaic"===t.type?e._showDataset=L.polygon(t.clipped,{color:"#f00",weight:2}):e._showDataset=L.polygon(t.polygon,{color:"#f00"}),e._showDataset.addTo(n))})}},{key:"makeList",value:function(){var t=this,e=this._data.list=[],n=this._data.tiles=[],a={};this._data.formats=[],this._data.types.forEach(function(r){var i=r.data_type;r.tiles=r.tiles||[],r.metadata.url=t.config.metadataTemplate.replace("{id}",r.metadata.id),r.tiles.forEach(function(o){n.push(o),o.type="dataset";var s=o.bbox.split(",").map(function(t){return+t});o.bbox=[[s[1],s[0]],[s[3],s[2]]],o.polygon=[[s[1],s[0]],[s[1],s[2]],[s[3],s[2]],[s[3],s[0]],[s[1],s[0]]],o.parent=r,o.intersects=!0,o.center=o.centre_pt.split(",").map(function(t){return+t}).reverse(),o.dataType=i,o.downloadables.forEach(function(n){e.push(n),n.parent=o,a[n.format]||(a[n.format]=n.format,t._data.formats.push({name:n.format,selected:!0}))})}),(r.mosaics||[]).forEach(function(t){var a={label:t.label,bbox:[],type:"mosaic",downloadables:[{format:"GEOTIFF",file_name:t.file_name}]},o=a.downloadables[0];o.parent=a,a.dataType=i,a.intersects=!0,e.push(o),a.polygon=t.geometry.coordinates;var s=Number.POSITIVE_INFINITY,l=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,d=Number.NEGATIVE_INFINITY;a.polygon.forEach(function(t){t.forEach(function(t){s=s<t[0]?s:t[0],l=l<t[1]?l:t[1],c=c>t[0]?c:t[0],d=d>t[1]?d:t[1]})}),a.bbox=[[l,s],[d,c]],a.center=[l+(d-l)/2,s+(c-s)/2],r.tiles.push(a),n.push(a)})}),this._data.formats.sort(function(t,e){return t.name>e.name}),console.log(this._data)}},{key:"showTiles",value:function(){var t=this,e=[];this._data.tiles.forEach(function(t){"mosaic"===t.type?e.push(t.polygon[0].map(function(t){return[t[1],t[0]]})):e.push(t.polygon)}),this.polys=L.multiPolygon(e,{color:"#dddddd",fill:!1,weight:1}),this.mapService.getMap().then(function(e){t.polys.addTo(e)})}},{key:"getDatasets",value:function(){return this.$http.get(this.config.datasetsUrl)}},{key:"data",get:function(){return this._data}}]),t}();DatasetsService.$inject=["$http","$rootScope","configService","mapService"],angular.module("bathy.datasets",["bathy.datasets.controls","bathy.datasets.type"]).directive("datasetsContainer",["$rootScope","datasetsService",function(t,e){return{templateUrl:"download/datasets/datasets.html",restrict:"AE",link:function(n){n.datasets=e.data,t.$on("bathy.bounds.draw",function(t,n){e.setBounds(n)})}}}]).directive("formatsFilter",["datasetsService",function(t){return{templateUrl:"download/datasets/formatsfilter.html",restrict:"AE",scope:{formats:"="},link:function(e){e.model={get all(){return!!e.formats&&e.formats.every(function(t){return t.selected})},set all(t){e.formats.forEach(function(e){
return e.selected=t})}},e.datasets=t.data}}}]).service("datasetsService",DatasetsService).filter("spatialSort",[function(){return function(t){return t}}]).filter("someIntersects",[function(){return function(t){return t?t.filter(function(t){return t.tiles.some(function(t){return t.intersects&&t.downloadables})}):[]}}]).filter("split",[function(){return function(t){return t.split(/\n/g)}}]),angular.module("bathy.datasets.type",[]).directive("datasetsType",["datasetsService",function(t){return{templateUrl:"download/datasets/type.html",restrict:"AE",scope:{name:"=",type:"="},link:function(e){e.show=function(e){t.show(e)},e.hide=function(){t.show(null)},e.zoom=function(e){t.zoom(e)}}}}]).directive("typeMetadata",[function(){return{templateUrl:"download/datasets/metadata.html",restrict:"AE",scope:{name:"=",metadata:"="},link:function(t){}}}]).filter("selectedFormat",[function(){return function(t,e){return(t?t:[]).filter(function(t){return e.some(function(e){return e.selected&&e.name===t.format})})}}]).filter("withinBounds",[function(){return function(t){return(t?t:[]).filter(function(t){return t.intersects})}}]).filter("sortFormat",function(){return function(t){return(t?t:[]).sort(function(t,e){return t.format>e.format})}}),angular.module("bathy.start",["bathy.datasets"]).directive("bathyDownload",[function(){return{templateUrl:"download/start/start.html",link:function(t,e,n){console.log("Hello select!")}}}]),angular.module("bathy.bbox",["geo.draw"]).directive("bathyBboxShowAll",["$rootScope","$timeout",function(t,e){return{link:function(n,a){a.on("click",function(){e(function(){t.$broadcast("bathybboxshowall")})})}}}]).directive("bathyBboxHideAll",["$rootScope",function(t){return{link:function(e,n){n.on("click",function(){t.$broadcast("bathybboxhideall")})}}}]).directive("bathyBboxShowVisible",["$rootScope","mapService",function(t,e){return{link:function(n,a){a.on("click",function(){e.getMap().then(function(e){t.$broadcast("bathybboxshowvisible",e.getBounds())})})}}}]).directive("bathyBbox",["$rootScope","bboxService",function(t,e){return{templateUrl:"wizard/bbox/bbox.html",scope:{data:"="},link:function(n,a){t.$on("bathybboxshowall",function(){n.data.hasBbox=!0}),t.$on("bathybboxhideall",function(){n.data.hasBbox=!1}),t.$on("bathybboxshowvisible",function(t,e){var a=n.data.bounds,r=e.getWest()<a.xMin&&e.getEast()>a.xMax&&e.getNorth()>a.yMax&&e.getSouth()<a.yMin;n.data.hasBbox=r}),n.$watch("data.hasBbox",function(t){t?e.draw(n.data).then(function(t){n.bbox=t}):n.bbox=e.remove(n.bbox)}),n.toggle=function(){n.data.hasBbox=!n.data.hasBbox},n.$on("$destroy",function(){n.data.hasBbox&&(n.bbox=e.remove(n.bbox))})}}}]).factory("bboxService",["mapService",function(t){var e="#ff7800";return{draw:function(n){var a=n.bbox.split(" "),r=[[+a[1],+a[0]],[+a[3],+a[2]]];return t.getMap().then(function(t){var n=L.rectangle(r,{fill:!1,color:e,weight:2,opacity:.8});return n.addTo(t),t.fitBounds(r),n})},remove:function(t){return t&&t._map.removeLayer(t),null}}}]),angular.module("bathy.clip",["geo.draw"]).directive("clipInfoBbox",function(){return{restrict:"AE",templateUrl:"wizard/clip/infobbox.html"}}).directive("mapClip",["$rootScope","$timeout","clipService","messageService","mapService",function(t,e,n,a,r){return{templateUrl:"wizard/clip/clip.html",scope:{bounds:"=",trigger:"=",drawn:"&"},link:function(i,o){function s(e){var n=i.clip;n.xMax=+e.clip.xMax,n.xMin=+e.clip.xMin,n.yMax=+e.clip.yMax,n.yMin=+e.clip.yMin,t.$broadcast("bathy.clip.drawn",n)}var l=void 0;i.clip={xMax:null,xMin:null,yMax:null,yMin:null},i.typing=!1,"undefined"==typeof i.showBounds&&(i.showBounds=!1),r.getMap().then(function(t){i.$watch("bounds",function(t){t&&i.trigger?e(function(){i.initiateDraw()}):t||n.cancelDraw()})}),i.check=function(){e.cancel(l),l=e(function(){t.$broadcast("bathy.clip.drawn",i.clip)},4e3)},t.$on("bathy.clip.draw",function(t,n){n&&"oversize"===n.message?(i.oversize=!0,e(function(){delete i.oversize},6e3)):delete i.oversize,i.initiateDraw()}),i.initiateDraw=function(){a.info("Click on the map and drag to define your area of interest."),n.initiateDraw().then(s)}}}}]).factory("clipService",["$q","$rootScope","drawService",function(t,e,n){function a(t){return r.data={clip:{xMax:t.bounds.getEast().toFixed(5),xMin:t.bounds.getWest().toFixed(5),yMax:t.bounds.getNorth().toFixed(5),yMin:t.bounds.getSouth().toFixed(5)}},r.data}var r={initiateDraw:function(){return this.data=null,n.drawRectangle().then(a)},cancelDraw:function(){n.cancelDrawRectangle()}};return r}]);var DownloadCtrl=function(t){t.data().then(function(t){this.data=t}.bind(this)),this.remove=function(){t.clear()},this.changeEmail=function(e){t.setEmail(e)}};DownloadCtrl.$inject=["downloadService"];var DownloadService=function(t,e,n,a,r){var i="download_email",o="Download Layers",s={zoom:null,center:null,layer:null},l={email:null,item:null},c={getLayerGroup:function(){return a.getGroup(o)},setState:function(t){function e(){var e=[[t.bounds.yMin,t.bounds.xMin],[t.bounds.yMax,t.bounds.xMax]];s.layer&&a.getGroup(o).removeLayer(s.layer),t.queryLayer||(s.layer=L.rectangle(e,{color:"black",fill:!1}),a.getGroup(o).addLayer(s.layer))}function n(t){a.clearGroup(o),s.layer=null}t?e():n(map)},add:function(t){this.clear(),l.item=t,l.item.download=!0,t.processsing||(t.processing={clip:{xMax:null,xMin:null,yMax:null,yMin:null}})},clear:function(){l.item&&(l.item.download=!1,l.item=null)},setEmail:function(t){r.setItem(i,t)},getEmail:function(){return r.getItem(i).then(function(t){return l.email=t,t})},data:function(){return e.when(l)}};return c};DownloadService.$inject=["$http","$q","$rootScope","mapService","persistService"],angular.module("bathy.download",["bathy.geoprocess"]).directive("wizardPopup",["downloadService",function(t){return{restrict:"AE",templateUrl:"wizard/download/popup.html",link:function(e){t.data().then(function(n){e.data=n,e.$watch("data.item",function(n,a){n&&(e.stage="bbox"),(n||a)&&t.setState(n)})})}}}]).directive("wizardDownload",["downloadService",function(t){return{restrict:"AE",controller:"DownloadCtrl",templateUrl:"wizard/download/popup.html",link:function(){console.log("What the download...")}}}]).directive("bathyDownload",["downloadService",function(t){return{templateUrl:"bathy/download/download.html",controller:"DownloadCtrl",link:function(e,n){t.data().then(function(t){e.data=t}),e.$watch("data.item",function(e,n){(e||n)&&t.setState(e)})}}}]).directive("downloadAdd",["$rootScope","downloadService","flashService",function(t,e,n){return{template:"<button type='button' class='undecorated' ng-click='toggle()'><span class='fa-stack'  tooltip-placement='right' tooltip='Extract data.'><i class='fa fa-lg fa-download' ng-class='{active:item.download}'></i></span></button>",restrict:"AE",scope:{item:"=",group:"="},link:function(a,r){a.toggle=function(){a.item.download?e.clear(a.item):(n.add("Select an area of interest that intersects the highlighted areas."),e.add(a.item),a.group&&a.group.sysId&&t.$broadcast("hide.wms",a.group.sysId))}}}}]).directive("downloadEmail",["downloadService",function(t){return{template:'<div class="input-group"><span class="input-group-addon" id="bathy-email">Email</span><input required="required" type="email" ng-change="download.changeEmail(email)" ng-model="email" class="form-control" placeholder="Email address to send download link" aria-describedby="bathy-email"></div>',restrict:"AE",link:function(e,n){t.getEmail().then(function(t){e.email=t})}}}]).directive("downloadFilename",["flashService","downloadService",function(t,e){return{template:'<div class="input-group"><span class="input-group-addon" id="bathy-filename">Filename</span><input type="text" ng-maxlength="30" ng-trim="true" ng-keypress="restrict($event)" ng-model="data.filename" class="form-control" placeholder="Optional filename" aria-describedby="bathy-filename"><span class="input-group-addon" id="basic-addon2">.zip</span></div><div>Only up to 9 characters made up of alphanumeric or "_" allowed for file name</div>',restrict:"AE",scope:{data:"="},link:function(e,n){var a;e.restrict=function(e){var n=e.keyCode,r=String.fromCharCode(n).toUpperCase();n>31&&!r.match(/[\_A-Z0-9]/gi)?(t.remove(a),a=t.add('Only alphanumeric characters or "_" allowed in filename.',5e3),e.preventDefault()):n>31&&e.currentTarget.value&&e.currentTarget.value.length>=9&&(t.remove(a),a=t.add("Filename is restricted to 9 characters.",5e3),e.preventDefault())}}}}]).controller("DownloadCtrl",DownloadCtrl).factory("downloadService",DownloadService);var GeoprocessService=function(t,e,n,a,r,i,o){function s(t){var e,n,a;return l.custom&&(e=l.custom[t.primaryId],e&&(n=e.key,a=e.templates[t[n]]))?a:l["default"]}var l,c,d="dems1sv1_0",u="service/log/geoprocess",p=null;return a.getConfig("initiateServiceTemplates").then(function(t){l=t}),i.getMap().then(function(t){c=t}),{queryLayer:function(t,n){var a=e.defer(),r=L.esri.featureLayer({url:t.url}),i=L.latLngBounds([n.yMin,n.xMin],[n.yMax,n.xMax]);return r.query().intersects(i).ids(function(t,e){t?a.reject(t):a.resolve(e)}),a.promise},outFormats:function(){return a.getConfig("processing").then(function(t){return t.outFormat})},handleShowClip:function(t){this.removeClip(),p=L.rectangle([[t.yMin,t.xMin],[t.yMax,t.xMax]],{weight:2,opacity:.9,fill:!1,color:"#000000",width:3,clickable:!1}),p.addTo(c)},removeClip:function(){p&&(c.removeLayer(p),p=null)},addLayer:function(t){return L.tileLayer.wms(t.parameters[0],t.parameters[1]).addTo(c)},removeLayer:function(t){c.removeLayer(t)},initiateJob:function(e,n){var a=d,i=s(e),o=e.processing,l={bbox:{yMin:o.clip.yMin,yMax:o.clip.yMax,xMin:o.clip.xMin,xMax:o.clip.xMax},geocatId:e.primaryId,crs:o.outCoordSys.code,format:o.outFormat.code};angular.forEach({basename:a,id:e.primaryId,yMin:o.clip.yMin,yMax:o.clip.yMax,xMin:o.clip.xMin,xMax:o.clip.xMax,outFormat:o.outFormat.code,outCoordSys:o.outCoordSys.code,filename:o.filename?o.filename:"",email:n},function(t,e){i=i.replace("${"+e+"}",t)}),$("#launcher")[0].src=i,r.setEmail(n),t.post(u,l),ga("send","event","bathy","click","FME data export: "+JSON.stringify(l))},getConfig:function(){return a.getConfig("processing")}}};GeoprocessService.$invoke=["$http","$q","$timeout","configService","downloadService","ga","mapService","downloadService"],angular.module("bathy.geoprocess",[]).directive("wizardGeoprocess",["$http","$q","$timeout","geoprocessService","flashService","messageService",function(t,e,n,a,r,i){return{restrict:"AE",templateUrl:"wizard/geoprocess/geoprocess.html",scope:{data:"="},link:function(o){function s(){l(),o.data.referenceLayer&&(v=a.addLayer(o.data.referenceLayer))}function l(){v&&a.removeLayer(v)}function c(t){var e=(t.xMax-t.xMin)*(t.yMax-t.yMin);return e<1e-11||t.xMax<t.xMin}function d(t){var e=Math.abs((t.xMax-t.xMin)*(t.yMax-t.yMin));return o.data.restrictSize&&e>o.data.restrictSize}function u(t,e){function n(t){return angular.isUndefined(t)||""===t||null===t}var a=!1,r=!1;return!(!e||n(t.xMax)||n(t.xMin)||n(t.yMax)||n(t.yMin))&&(r=a=+t.xMax<+e.xMin,a&&(t.xMax=+e.xMin),a=+t.xMax>+e.xMax,r=r||a,a&&(t.xMax=+e.xMax),a=+t.xMin<+e.xMin,r=r||a,a&&(t.xMin=+e.xMin),a=+t.xMin>+t.xMax,r=r||a,a&&(t.xMin=t.xMax),a=+t.yMax<+e.yMin,r=r||a,a&&(t.yMax=+e.yMin),a=+t.yMax>+e.yMax,r=r||a,a&&(t.yMax=+e.yMax),a=+t.yMin<+e.yMin,r=r||a,a&&(t.yMin=+e.yMin),a=+t.yMin>+t.yMax,r=r||a,a&&(t.yMin=+t.yMax),r)}function p(t){t.xMax=null===t.xMax?null:+t.xMax,t.xMin=null===t.xMin?null:+t.xMin,t.yMax=null===t.yMax?null:+t.yMax,t.yMin=null===t.yMin?null:+t.yMin}function h(t){return t&&angular.isNumber(t.xMax)&&angular.isNumber(t.xMin)&&angular.isNumber(t.yMax)&&angular.isNumber(t.yMin)&&!d(t)&&!c(t)}var f,g,v;a.outFormats().then(function(t){o.outFormats=t}),o.$watch("data",function(t,e){e&&(a.removeClip(),l()),t&&t!=e&&(o.stage="bbox",s())}),o.$watchGroup(["data.processing.clip.xMax","data.processing.clip.xMin","data.processing.clip.yMax","data.processing.clip.yMin"],function(o,l,c){function d(){var t=e.defer();if(u=c.drawn(),u&&u.code)switch(u.code){case"oversize":n(function(){r.remove(f),i.error("The selected area is too large to process. Please restrict to approximately "+Math.sqrt(c.data.restrictSize)+" degrees square."),c.stage="bbox",s(),t.resolve(u)});break;case"undersize":n(function(){r.remove(f),i.error("X Min and Y Min should be smaller than X Max and Y Max, respectively. Please update the drawn area."),c.stage="bbox",s(),t.resolve(u)});break;default:return e.when(u)}return t.promise}var u=void 0,p=void 0;g&&(n.cancel(g),g=null),c.data&&c.data.processing&&c.data.processing.clip&&null!==c.data.processing.clip.xMax&&(p=c.config.extentCheckTemplates[c.data.sysId],f=r.add("Validating selected area...",3e3),c.checkingOrFailed=!!p,g=n(function(){d().then(function(e){try{if(e&&"success"==e.code)if(p){var n=p.replace("{maxx}",o[0]).replace("{minx}",o[1]).replace("{maxy}",o[2]).replace("{miny}",o[3]);r.remove(f),f=r.add("Checking there is data in your selected area..."),t.get(n).then(function(t){t.data&&t.data.length>0&&(r.remove(f),t.data[0].Intersect===!1?(i.error("There is no data covering the drawn area currently in this resolution dataset.",6e3),c.stage="bbox",s()):(f=t.data[0].Intersect===!0?r.add('There is intersecting data. Click "Next" if you are ready to proceed.',5e3):r.add('Click "Next" if you are ready to proceed.',4e3),c.checkingOrFailed=!1,a.handleShowClip(c.data.processing.clip))),console.log(t)},function(t){c.checkingOrFailed=!1,a.handleShowClip(c.data.processing.clip),console.log("Service unavailable to check intersection")})}else a.handleShowClip(c.data.processing.clip),c.checkingOrFailed=!1}catch(l){c.checkingOrFailed=!1}})},2e3))}),o.drawn=function(){return a.removeClip(),p(o.data.processing.clip),u(o.data.processing.clip,o.data.bounds)&&(f=r.add("Redrawn to fit within data extent",5e3)),d(o.data.processing.clip)?{code:"oversize"}:c(o.data.processing.clip)?{code:"undersize"}:null===o.data.processing.clip.xMax?{code:"incomplete"}:h(o.data.processing.clip)?{code:"success"}:{code:"invalid"}},o.startExtract=function(){o.allDataSet()&&(i.info("Your job has been submitted. Note that you will receive an email once the job is complete and that it may take a few hours depending on the size of the dataset."),r.add("You can select another area for processing.",1e4),a.initiateJob(o.data,o.email),o.data.download=!1)},o.allDataSet=function(){var t=o.data&&o.data.processing?o.data.processing:null;return t&&o.email&&h(t.clip)&&t.outCoordSys&&t.outFormat},o.validSansEmail=function(){var t=o.data&&o.data.processing?o.data.processing:null;return t&&h(t.clip)&&t.outCoordSys&&t.outFormat},o.validClip=function(t){return t&&t.processing&&h(t.processing.clip)},a.getConfig().then(function(t){o.config=t})}}}]).factory("geoprocessService",GeoprocessService).filter("sysIntersect",function(){return function(t,e){return e&&angular.isNumber(e.xMin)&&angular.isNumber(e.xMax)&&angular.isNumber(e.yMin)&&angular.isNumber(e.yMax)?t.filter(function(t){return!t.extent||t.extent.xMin<=e.xMin&&t.extent.xMax>=e.xMax&&t.extent.yMin<=e.yMin&&t.extent.yMax>=e.yMax}):t}});var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),SearchCtrl=function(){function t(e,n,a,r){var i=this;_classCallCheck(this,t),this.configService=n,this.flashService=a,this.searchService=r,e.$on("search.results.received",function(t,e){a.remove(i.flasher),i.data=e}),e.$on("more.search.results",function(){a.remove(i.flasher),i.flasher=a.add("Fetching more results",1e3,!0),r.more()}),n.getConfig("facets").then(function(t){i.hasKeywords=t&&t.keywordMapped&&t.keywordMapped.length>0})}return _createClass(t,[{key:"search",value:function(){this.flashService.remove(this.flasher),this.flasher=this.flashService.add("Searching",3e3,!0),this.searchService.setFilter(this.filter)}},{key:"toggle",value:function(t){this.searchService.toggle(t)}},{key:"toggleAll",value:function(){this.searchService.toggleAll(this.data.response.docs)}},{key:"showWithin",value:function(){this.searchService.showWithin(this.data.response.docs)}},{key:"allShowing",value:function(){return!(!this.data||!this.data.response)&&!this.data.response.docs.some(function(t){return!t.showLayer})}},{key:"anyShowing",value:function(){return!(!this.data||!this.data.response)&&this.data.response.docs.some(function(t){return t.showLayer})}},{key:"hideAll",value:function(){this.searchService.hideAll(this.data.response.docs)}},{key:"hilight",value:function(t){t.layer&&this.searchService.hilight(t.layer)}},{key:"lolight",value:function(t){t.layer&&this.searchService.lolight(t.layer)}}]),t}();SearchCtrl.$inject=["$rootScope","configService","flashService","searchService"];var SearchCriteriaCtrl=function(){function t(e){_classCallCheck(this,t),this.searchService=e,this.criteria=e.getSearchCriteria()}return _createClass(t,[{key:"refresh",value:function(){this.searchService.refresh()}}]),t}();SearchCriteriaCtrl.$inject=["searchService"],angular.module("bathy.search",["bathy.search.service"]).controller("SearchCtrl",SearchCtrl).controller("SearchCriteriaCtrl",SearchCriteriaCtrl).directive("bathySearch",[function(){return{templateUrl:"wizard/search/search.html"}}]).filter("pubDate",function(){return function(t){var e;return t?(e=new Date(t),e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()):"-"}}).filter("authors",function(){return function(t){return t?t.join(", "):"-"}}).filter("truncate",function(){return function(t,e){return t&&t.length>e-3?t.substr(0,e-3)+"...":t}}),angular.module("bathy.templates",[]).run(["$templateCache",function(t){t.put("bathy/about/about.html",'<span class="about" ng-mouseenter="over()" ng-mouseleave="out()"\r\n      ng-class="(about.show || about.ingroup || about.stick) ? \'transitioned-down\' : \'transitioned-up\'">\r\n   <button class="undecorated about-unstick" ng-click="unstick()" style="float:right">X</button>\r\n   <div class="aboutHeading">About MH370 Bathymetry</div>\r\n   <div ng-repeat="item in about.items">\r\n      <a ng-href="{{item.link}}" name="about{{$index}}" title="{{item.heading}}" target="_blank">\r\n         {{item.heading}}\r\n      </a>\r\n   </div>\r\n</span>'),t.put("bathy/about/button.html",'<button ng-mouseenter="over()" ng-mouseleave="out()"\r\n      ng-click="toggleStick()" tooltip-placement="left" uib-tooltip="About MH370 Bathymetry"\r\n      class="btn btn-primary btn-default">About</button>'),t.put("bathy/extent/extent.html",'<div class="row" style="border-top: 1px solid gray; padding-top:5px">\r\n\t<div class="col-md-5">\r\n\t\t<div class="form-inline">\r\n\t\t\t<label>\r\n\t\t\t\t<input id="extentEnable" type="checkbox" ng-model="parameters.fromMap" ng-click="change()"></input> \r\n\t\t\t\tRestrict area to map\r\n\t\t\t</label>\r\n\t\t</div>\r\n\t</div>\r\n\t \r\n\t<div class="col-md-7" ng-show="parameters.fromMap">\r\n\t\t<div class="container-fluid">\r\n\t\t\t<div class="row">\r\n\t\t\t\t<div class="col-md-offset-3 col-md-8">\r\n\t\t\t\t\t<strong>Y Max:</strong> \r\n\t\t\t\t\t<span>{{parameters.yMax | number : 4}}</span> \r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class="row">\r\n\t\t\t\t<div class="col-md-6">\r\n\t\t\t\t\t<strong>X Min:</strong>\r\n\t\t\t\t\t<span>{{parameters.xMin | number : 4}}</span> \r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="col-md-6">\r\n\t\t\t\t\t<strong>X Max:</strong>\r\n\t\t\t\t\t<span>{{parameters.xMax | number : 4}}</span> \r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class="row">\r\n\t\t\t\t<div class="col-md-offset-3 col-md-8">\r\n\t\t\t\t\t<strong>Y Min:</strong>\r\n\t\t\t\t\t<span>{{parameters.yMin | number : 4}}</span> \r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),t.put("bathy/maps/maps.html",'<div  ng-controller="MapsCtrl as maps">\r\n\t<div style="position:relative;padding:5px;padding-left:10px;" >\r\n\t\t<div class="panel panel-default" style="padding:5px;" >\r\n\t\t\t<div class="panel-heading">\r\n\t\t\t\t<h3 class="panel-title">Layers</h3>\r\n\t\t\t</div>\r\n\t\t\t<div class="panel-body">\r\n\t\t\t\t<div class="container-fluid">\r\n\t\t\t\t\t<div class="row" ng-repeat="layer in layersTab.layers" \r\n\t\t\t\t\t\t\tstyle="padding:7px;padding-left:10px;position:relative" ng-class-even="\'even\'" ng-class-odd="\'odd\'">\r\n\t\t\t\t\t\t<div style="position:relative;left:6px;">\r\n\t\t\t\t\t\t\t<a href="{{layer.metadata}}" target="_blank" \r\n\t\t\t\t\t\t\t\t\tclass="featureLink" title=\'View metadata related to "{{layer.name}}". (Opens new window.)\'>\r\n\t\t\t\t\t\t\t\t{{layer.name}}\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t<div class="pull-right" style="width:270px;" tooltip="Show on map. {{layer.help}}">\r\n\t\t\t\t\t\t\t\t<span style="padding-left:10px;width:240px;" class="pull-left"><explorer-layer-slider layer="layer.layer"></explorer-layer-slider></span>\r\n\t\t\t\t\t\t\t\t<button style="padding:2px 8px 2px 2px;" type="button" class="undecorated featureLink pull-right" href="javascript:;" \r\n\t\t\t\t\t\t\t\t\t\tng-click="maps.toggleLayer(layer)" >\r\n\t\t\t\t\t\t\t\t\t<i class="fa" ng-class="{\'fa-eye-slash\':(!layer.displayed), \'fa-eye active\':layer.displayed}"></i>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),t.put("bathy/panes/panes.html",'<div class="mapContainer" class="col-md-12" style="padding-right:0">\r\n\t<div class="panesMapContainer" geo-map configuration="data.map"></div>\r\n   <div class="base-layer-controller">\r\n    \t<div geo-draw data="data.map.drawOptions" line-event="elevation.plot.data" rectangle-event="bounds.drawn"></div>\r\n   </div>\r\n   <restrict-pan bounds="data.map.position.bounds"></restrict-pan>\r\n</div>'),t.put("bathy/header/header.html",'<div class="container-full common-header" style="padding-right:10px; padding-left:10px">\r\n    <div class="navbar-header">\r\n\r\n        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".ga-header-collapse">\r\n            <span class="sr-only">Toggle navigation</span>\r\n            <span class="icon-bar"></span>\r\n            <span class="icon-bar"></span>\r\n            <span class="icon-bar"></span>\r\n        </button>\r\n\r\n        <a href="http://www.ga.gov.au" class="hidden-xs"><img src="data:image/png;base64,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" alt="Australian Government - Geoscience Australia" class="logo"></img></a>\r\n        <a href="http://www.ga.gov.au" class="visible-xs"><img src="data:image/png;base64,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" alt="Australian Government - Geoscience Australia" class="logo-stacked"></img></a>\r\n        <a href="/" class="appTitle visible-xs">\r\n            <h1 style="font-size:120%">{{heading}}</h1>\r\n        </a>\r\n    </div>\r\n    <div class="navbar-collapse collapse ga-header-collapse">\r\n        <ul class="nav navbar-nav">\r\n            <li class="hidden-xs"><a href="/"><h1 class="applicationTitle">{{heading}}</h1></a></li>\r\n        </ul>\r\n        <ul class="nav navbar-nav navbar-right nav-icons">\r\n\t\t\t<li mars-version-display role="menuitem" style="padding-top: 19px;"></li>\r\n\t\t\t<li style="width:10px"></li>\r\n        </ul>\r\n    </div><!--/.nav-collapse -->\r\n</div>\r\n\r\n<!-- Strap -->\r\n<div class="row">\r\n    <div class="col-md-12">\r\n        <div class="strap-blue">\r\n        </div>\r\n        <div class="strap-white">\r\n        </div>\r\n        <div class="strap-red">\r\n        </div>\r\n    </div>\r\n</div>'),
t.put("bathy/popover/popover.html",'<div class="bathy-popover {{direction}}" ng-class="containerClass" ng-show="show">\r\n  <div class="arrow"></div>\r\n  <div class="bathy-popover-inner" ng-transclude></div>\r\n</div>'),t.put("bathy/reset/reset.html",'<button type="button" class="map-tool-toggle-btn" ng-click="reset()" title="Reset page">\r\n   <span class="hidden-sm">Reset</span>\r\n   <i class="fa fa-lg fa-refresh"></i>\r\n</button>'),t.put("bathy/select/doc.html",'<div ng-class-odd="\'odd\'" ng-class-even="\'even\'" ng-mouseleave="select.lolight(doc)" ng-mouseenter="select.hilight(doc)">\r\n\t<span ng-class="{ellipsis:!expanded}" tooltip-enable="!expanded" style="width:100%;display:inline-block;"\r\n\t\t\ttooltip-class="selectAbstractTooltip" tooltip="{{doc.abstract | truncate : 250}}" tooltip-placement="bottom">\r\n\t\t<button type="button" class="undecorated" ng-click="expanded = !expanded" title="Click to see more about this dataset">\r\n\t\t\t<i class="fa pad-right fa-lg" ng-class="{\'fa-caret-down\':expanded,\'fa-caret-right\':(!expanded)}"></i>\r\n\t\t</button>\r\n\t\t<download-add item="doc" group="group"></download-add>\r\n\t\t<bathy-wms data="doc"></bathy-wms>\r\n\t\t<bathy-bbox data="doc" ng-if="doc.showExtent"></bathy-bbox>\r\n\t\t<a href="http://www.ga.gov.au/metadata-gateway/metadata/record/{{doc.sysId}}" target="_blank" ><strong>{{doc.title}}</strong></a>\r\n\t</span>\r\n\t<span ng-class="{ellipsis:!expanded}" style="width:100%;display:inline-block;padding-right:15px;">\r\n\t\t{{doc.abstract}}\r\n\t</span>\r\n\t<div ng-show="expanded" style="padding-bottom: 5px;">\r\n\t\t<h5>Keywords</h5>\r\n\t\t<div>\r\n\t\t\t<span class="badge" ng-repeat="keyword in doc.keywords track by $index">{{keyword}}</span>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),t.put("bathy/select/group.html",'<div class="panel panel-default" style="margin-bottom:-5px;" >\r\n\t<div class="panel-heading"><bathy-wms data="group"></bathy-wms> <strong>{{group.title}}</strong></div>\r\n\t<div class="panel-body">\r\n   \t\t<div ng-repeat="doc in group.docs">\r\n   \t\t\t<select-doc doc="doc" group="group"></select-doc>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n'),t.put("bathy/select/select.html",'<div>\r\n\t<div style="position:relative;padding:5px;padding-left:10px;" ng-controller="SelectCtrl as select" class="scrollPanel">\r\n\t\t<div class="panel panel-default" style="margin-bottom:-5px">\r\n  \t\t\t<div class="panel-heading">\r\n  \t\t\t\t<h3 class="panel-title">Available datasets</h3>\r\n  \t\t\t</div>\r\n  \t\t\t<div class="panel-body">\r\n\t\t\t\t<div ng-repeat="doc in select.data.response.docs" style="padding-bottom:7px">\r\n\t\t\t\t\t<select-doc ng-if="doc.type == \'dataset\'" doc="doc"></select-doc>\r\n\t\t\t\t\t<select-group ng-if="doc.type == \'group\'" group="doc"></select-group>\r\n\t\t\t\t</div>\r\n  \t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),t.put("bathy/side-panel/side-panel-left.html",'<div class="cbp-spmenu cbp-spmenu-vertical cbp-spmenu-left" style="width: {{left.width}}px;" ng-class="{\'cbp-spmenu-open\': left.active}">\r\n    <a href="" title="Close panel" ng-click="closeLeft()" style="z-index: 1200">\r\n        <span class="glyphicon glyphicon-chevron-left pull-right"></span>\r\n    </a>\r\n    <div ng-show="left.active === \'legend\'" class="left-side-menu-container">\r\n        <legend url="\'img/AustralianTopogaphyLegend.png\'" title="\'Map Legend\'"></legend>\r\n    </div>\r\n</div>'),t.put("bathy/side-panel/side-panel-right.html",'<div class="cbp-spmenu cbp-spmenu-vertical cbp-spmenu-right noPrint" ng-attr-style="width:{{right.width}}" ng-class="{\'cbp-spmenu-open\': right.active}">\r\n    <a href="" title="Close panel" ng-click="closePanel()" style="z-index: 1200">\r\n        <span class="glyphicon glyphicon-chevron-right pull-left"></span>\r\n    </a>\r\n    <div ng-show="right.active === \'datasets\'" class="right-side-menu-container">\r\n        <div class="panesTabContentItem" bathy-download ></div>\r\n    </div>\r\n    <div ng-if="right.active === \'glossary\'" class="right-side-menu-container">\r\n        <div class="panesTabContentItem" bathy-glossary></div>\r\n    </div>\r\n    <div ng-show="right.active === \'help\'" class="right-side-menu-container">\r\n        <div class="panesTabContentItem" bathy-help></div>\r\n    </div>\r\n</div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n'),t.put("bathy/side-panel/trigger.html",'<button ng-click="toggle()" type="button" class="map-tool-toggle-btn">\r\n   <span class="hidden-sm">{{name}}</span>\r\n   <i class="fa fa-lg" ng-class="iconClass"></i>\r\n</button>'),t.put("bathy/splash/splash.html",'<div class="modal-header">\r\n   <h3 class="modal-title splash">MH370 Bathymetry</h3>\r\n</div>\r\n<div class="modal-body" id="accept" ng-form exp-enter="accept()" bathy-splash-modal style="width: 100%; margin-left: auto; margin-right: auto;">\r\n\t<div style="border-bottom:1px solid gray">\r\n\t\t<p>\r\n\t\t\tUsers can download the bathymetry data over the Indian Ocean which is licensed under Creative Commons.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tData can be downloaded from the portal at <strong>no charge</strong> and there is no limit to how many requests you can place (please check the file size before you download your results).\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tIf you need datasets in full, please contact <a href="clientservices@ga.gov.au">clientservices@ga.gov.au</a>.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t<a href="http://opentopo.sdsc.edu/gridsphere/gridsphere?cid=contributeframeportlet&gs_action=listTools" target="_blank">Click here for Free GIS Tools.</a>\r\n\t\t</p>\r\n\r\n\t\t<div style="padding:30px; padding-top:0; padding-bottom:40px; width:100%">\r\n\t\t\t<div class="pull-right">\r\n\t\t\t  \t<button type="button" class="btn btn-primary" ng-model="seenSplash" ng-focus ng-click="accept()">Continue</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div ng-show="messages.length > 0" class="container" style="width:100%; max-height:250px; overflow-y:auto">\r\n\t\t<div class="row" ng-class-even="\'grayline\'" style="font-weight:bold">\r\n\t\t\t<div class="col-sm-12" ><h3>News</h3></div>\r\n\t\t</div>\r\n\r\n\t\t<div class="row"ng-class-even="\'grayline\'" style="max-height:400px;overflow:auto" ng-repeat="message in messages | sortNotes">\r\n\t\t\t<div class="col-sm-12">\r\n\t\t\t\t<h4>{{message.title}} <span class="pull-right" style="font-size:70%">Created: {{message.creationDate | date : "dd/MM/yyyy"}}</span></h4>\r\n\t\t\t\t<div ng-bind-html="message.description"></div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),t.put("bathy/toolbar/toolbar.html",'<div class="bathy-toolbar noPrint">\r\n    <div class="toolBarContainer">\r\n        <div>\r\n            <ul class="left-toolbar-items"></ul>\r\n            <ul class="right-toolbar-items">\r\n                <li>\r\n                    <panel-trigger panel-id="datasets" panel-width="540px" name="Downloads" icon-class="fa-download" default="true"></panel-trigger>\r\n                </li>\r\n                <li reset-page></li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</div>'),t.put("download/reviewing/reviewing.html",'<div class="modal-header">\r\n   <h3 class="modal-title splash">Review datasets, provide email and continue</h3>\r\n</div>\r\n<div class="modal-body" id="accept" ng-form exp-enter="accept()" icsm-splash-modal style="width: 100%; margin-left: auto; margin-right: auto;">\r\n   <div>\r\n      <div class="row">\r\n         <div class="col-md-12">\r\n            <h4>{{countAccepted()}} Selected Datasets</h4>\r\n            Review and delete unwanted datasets.\r\n         </div>\r\n      </div>\r\n\r\n      <div class="reviewing-datasets">\r\n         <div class="row" ng-repeat="product in products" ng-class-odd="\'reviewing-odd\'">\r\n            <div class="col-md-11">\r\n               <button type="button" class="btn btn-default btn-xs" ng-click="product.removed = !product.removed" role="checkbox">\r\n                  <i class="fa fa-2x" style="width:24px;height:20px;color:green" ng-class="{\'fa-check\': !product.removed}" aria-hidden="true"></i>\r\n               </button>\r\n\r\n               <span style="padding-left:7px" ng-class="{\'exclude\': product.removed}" ng-if="product.download.parent.type == \'mosaic\'">\r\n                  Mosaic {{product.download.parent.dataType}}\r\n                  - bounds:\r\n                     {{clip.yMin|number : 1}}&deg; west,\r\n                     {{clip.xMin|number : 1}}&deg; north,\r\n                     {{clip.yMax|number : 1}}&deg; east,\r\n                     {{clip.xMax|number : 1}}&deg; south\r\n               </span>\r\n\r\n\r\n\r\n               <span style="padding-left:7px" ng-class="{\'exclude\': product.removed}" ng-if="product.download.parent.type != \'mosaic\'">\r\n                  {{product.download.parent.dataType}} <span style="font-weight:bold">{{product.download.parent.tile_id}}</span>               - {{product.download.format}} - bounds: {{product.download.parent.bbox[0][1]|number : 1}}&deg; west, {{product.download.parent.bbox[1][0]|number\r\n               : 1}}&deg; north, {{product.download.parent.bbox[1][1]|number : 1}}&deg; east, {{product.download.parent.bbox[0][0]|number\r\n               : 1}}&deg; south\r\n               </span>\r\n\r\n\r\n            </div>\r\n            <div class="col-md-1" style="padding:6px">\r\n               {{product.download.file_size | bytes}}\r\n            </div>\r\n         </div>\r\n      </div>\r\n\r\n\r\n   </div>\r\n   <div class="row reviewing-divider">\r\n      <div class="col-md-3">\r\n         <label for="geoprocessOutputFormat">\r\n\t\t\t\t\tOutput Format\r\n\t\t\t\t</label>\r\n      </div>\r\n      <div class="col-md-9">\r\n         <select id="geoprocessOutputFormat" style="width:95%" ng-model="data.outFormat" ng-options="opt.value for opt in data.config.outFormat"></select>\r\n      </div>\r\n   </div>\r\n   <div class="row">\r\n      <div class="col-md-12">\r\n         <p>\r\n            <strong>Email notification</strong> The extract of data can take some time. By providing an email address we\r\n            will be able to notify you when the job is complete. The email will provide a link to the extracted data which\r\n            will be packaged up as a single compressed file.\r\n         </p>\r\n         <div review-email></div>\r\n      </div>\r\n   </div>\r\n   <div class="row">\r\n      <div class="col-md-12">\r\n         <div class="pull-right" style="padding:8px;">\r\n            <button type="button" class="btn btn-primary" ng-click="accept()" ng-disabled="!isValid()">\r\n               Start extract of datasets\r\n             </button>\r\n            <button type="button" class="btn btn-primary" ng-click="cancel()">Cancel</button>\r\n         </div>\r\n      </div>\r\n   </div>\r\n</div>'),t.put("download/datasets/controls.html",'<div class="continue-container" ng-if="hasSelectedDownloadables()" style="text-align: right">\r\n   <button class="btn btn-primary" ng-click="review()">\r\n      Review {{selectedDownloadables().length}} selected datasets\r\n   </button>\r\n</div>\r\n'),t.put("download/datasets/datasets.html",'<div ng-show="datasets.bounds">\r\n   <formats-filter formats="datasets.formats"></formats-filter>\r\n   <div class="dataset-list">\r\n      <datasets-type ng-repeat="value in datasets.types | someIntersects"\r\n               type="value" name="value.data_type"/>\r\n   </div>\r\n   <datasets-controls datasets="datasets"></datasets-controls>\r\n</div>'),t.put("download/datasets/formatsfilter.html",'<div style="border-bottom: solid 1px lightgray;padding: 3px;padding-left: 8px" ng-show="formats.length > 1">\r\n   <strong>Formats: </strong>\r\n   <span style="padding-left:10px; padding-right:10px">\r\n      <label>All <input type="checkbox" ng-model="model.all" style="margin:0; height:11px"></input></label>\r\n   </span>\r\n   <span style="border: solid 1px lightgray; padding:3px; border-radius: 2px; background-color: #eee">\r\n      <span ng-repeat="format in formats" style="padding-left:10px;">\r\n         <label> {{format.name}} <input type="checkbox" ng-model="format.selected" style="margin:0; height:11px"></input></label>\r\n      </span>\r\n   </span>\r\n</div>'),t.put("download/datasets/metadata.html",'<h4>\r\n   <a href="{{metadata.url}}" target="_blank" ng-mouseenter="metadata.show = true" ng-mouseleave="metadata.show = false">{{name}}</a>\r\n   <div bathy-popover show="metadata.show" direction="custom-{{metadata.id}}">\r\n      <h4>{{metadata.title}}</h4>\r\n      <div ng-repeat="line in (metadata.description | split)">\r\n         <p>{{line}}</p>\r\n      </div>\r\n   </div>\r\n</h4>'),t.put("download/datasets/type.html",'<div class="dataset-group">\r\n   <type-metadata metadata="type.metadata" name="name"></type-metadata>\r\n   <div class="dataset-subgroup" ng-repeat="tile in type.tiles | withinBounds" ng-mouseenter="show(tile)" ng-mouseleave="hide()">\r\n      <h5>\r\n         <input type="checkbox" ng-model="tile.downloadables[0].selected">\r\n         <a href="javascript:void(0)" ng-click="zoom(tile)">\r\n            {{tile.label || tile.tile_id}}\r\n            <span ng-if="tile.downloadables[0].file_size">({{tile.downloadables[0].file_size | bytes}})</span>\r\n         </a>\r\n      </h5>\r\n   </div>\r\n</div>'),t.put("download/start/start.html","<div>\r\n   <map-clip></map-clip>\r\n   <datasets-container></datasets-container>\r\n</div>"),t.put("wizard/bbox/bbox.html",'<button type="button" class="undecorated" ng-click="toggle()" tooltip-placement="right" tooltip="Show data extent on the map.">\r\n\t<i class="fa pad-right fa-lg" ng-class="{\'fa-eye orange\':data.hasBbox,\'fa-eye-slash\':!data.hasBbox}"></i>\r\n</button>'),t.put("wizard/clip/clip.html",'<div class="well well-sm" style="margin-bottom:5px">\r\n\t<div class="container-fluid">\r\n\t\t<div class="row">\r\n\t\t\t<div class="col-md-12" style="padding:0">\r\n\t\t\t\t<div class="" role="group" aria-label="...">\r\n\t\t\t\t\t<button ng-click="initiateDraw()" ng-disable="client.drawing"\r\n                      tooltip-append-to-body="true" tooltip-placement="bottom" uib-tooltip="Enable drawing of a bounding box. On enabling, click on the map and drag diagonally"\r\n\t\t\t\t\t\tclass="btn btn-primary btn-default">Select an area...</button>\r\n               <span style="float:right">\r\n\t\t\t\t\t   <button ng-click="showInfo = !showInfo" tooltip-placement="left" uib-tooltip="Information." class="btn btn-primary btn-default"><i class="fa fa-info"></i></button>\r\n\t\t\t\t\t   <bathy-about-link></bathy-about-link>\r\n               </span>\r\n            </div>\r\n            <bathy-about></bathy-about>\r\n\t\t\t\t<exp-info title="Selecting an area" show-close="true" style="width:450px;position:fixed;top:200px;right:40px" is-open="showInfo">\r\n\t\t\t\t\t<clip-info-bbox></clip-info-bbox>\r\n\t\t\t\t</exp-info>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div ng-show="oversize" style="margin-top:6px">\r\n\t\t\t<div class="alert alert-danger"\r\n            style="padding:2px; margin-bottom:0px" role="alert">Please restrict the size of your selected area to no more than 2000 square degrees.</div>\r\n\t\t</div>\r\n\r\n\t\t<div class="row" ng-hide="(!clip.xMin && clip.xMin != 0) || oversize" style="padding-top:7px;">\r\n\t\t\t<div class="col-md-12">\r\n\t\t\t\tSelected bounds: {{clip.xMin|number : 4}}&deg; west, {{clip.yMax|number : 4}}&deg; north, {{clip.xMax|number : 4}}&deg; east, {{clip.yMin|number\r\n\t\t\t\t: 4}}&deg; south\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="container-fluid" style="padding-top:7px" ng-show="typing">\r\n\t\t<div class="row">\r\n\t\t\t<div class="col-md-3"> </div>\r\n\t\t\t<div class="col-md-8">\r\n\t\t\t\t<div style="font-weight:bold;width:3.5em;display:inline-block">Y Max:</div>\r\n\t\t\t\t<span>\r\n               <input type="text" style="width:6em" ng-model="clip.yMax" ng-change="check()"></input>\r\n               <span ng-show="showBounds && bounds">({{bounds.yMax|number : 4}} max)</span>\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="row">\r\n\t\t\t<div class="col-md-6">\r\n\t\t\t\t<div style="font-weight:bold;width:3.5em;display:inline-block">X Min:</div>\r\n\t\t\t\t<span>\r\n               <input type="text" style="width:6em" ng-model="clip.xMin" ng-change="check()"></input>\r\n               <span ng-show="showBounds && bounds">({{bounds.xMin|number : 4}} min)</span>\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t\t<div class="col-md-6">\r\n\t\t\t\t<div style="font-weight:bold;width:3.5em;display:inline-block">X Max:</div>\r\n\t\t\t\t<span>\r\n               <input type="text" style="width:6em" ng-model="clip.xMax" ng-change="check()"></input>\r\n               <span ng-show="showBounds && bounds">({{bounds.xMax|number : 4}} max)</span>\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="row">\r\n\t\t\t<div class="col-md-offset-3 col-md-8">\r\n\t\t\t\t<div style="font-weight:bold;width:3.5em;display:inline-block">Y Min:</div>\r\n\t\t\t\t<span>\r\n               <input type="text" style="width:6em" ng-model="clip.yMin" ng-change="check()"></input>\r\n               <span ng-show="showBounds && bounds">({{bounds.yMin|number : 4}} min)</span>\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),t.put("wizard/clip/infobbox.html",'<div class="">\r\n\t<strong style="font-size:120%">Select an area of interest.</strong>\r\n   By hitting the "Select an area..." button an area on the map can be selected with the mouse by clicking a\r\n   corner and while holding the left mouse button\r\n\tdown drag diagonally across the map to the opposite corner.\r\n\t<br/>\r\n\tClicking the "Select an area..." button again allows replacing a previous area selection. <br/>\r\n\t<strong>Notes:</strong>\r\n   <ul>\r\n      <li>Data is only available in the gridded area to the west of Australia.</li>\r\n      <li>Can\'t move the map? The shown area is restricted to where there is data.</li>\r\n   </ul>\r\n\t<p style="padding-top:5px"><strong>Hint:</strong> If the map has focus, you can use the arrow keys to pan the map.\r\n\t\tYou can zoom in and out using the mouse wheel or the "+" and "-" map control on the top left of the map. If you have made an error in the\r\n      position of your area of interest, hit the "Select an area..." button and draw a new bounding box.\r\n\t</p>\r\n</div>'),t.put("wizard/download/download.html",'<exp-modal ng-controller="DownloadCtrl as dl" icon-class="fa-download" is-open="dl.data.item.download" title="Download data" on-close="dl.remove()" is-modal="true">\r\n\t<div style="padding:5px;">\r\n\t\t<div class="row">\r\n  \t\t\t<div class="col-md-12">\r\n\t\t\t\t<h4><bathy-wms data="dl.data.item"></bathy-wms>{{dl.data.item.title}}</h4>\r\n\t\t\t\t{{dl.data.item.abstract}}\r\n   \t\t\t</div>\r\n\t\t</div>\r\n\t\t<bathy-geoprocess data="dl.data.item"></bathy-geoprocess>\r\n\t</div>\r\n</exp-modal>'),t.put("wizard/download/popup.html",'<exp-modal icon-class="fa-download"  is-open="data.item.download" title="Download wizard" on-close="dl.remove()">\r\n\t<div class="container-fluid downloadInner" >\r\n\t\t<div class="row">\r\n  \t\t\t<div class="col-md-12">\r\n\t\t\t\t<h4><bathy-wms data="dl.data.item"></bathy-wms>\r\n\t\t\t\t\t<a href="http://www.ga.gov.au/metadata-gateway/metadata/record/{{dl.data.item.sysId}}" target="_blank"><strong class="ng-binding">{{dl.data.item.title}}</strong></a>\r\n\t\t\t\t</h4>\r\n   \t\t\t</div>\r\n\t\t</div>\r\n\t\t<wizard-geoprocess data="dl.data.item"></wizard-geoprocess>\r\n\t</div>\r\n</exp-modal>'),t.put("wizard/geoprocess/geoprocess.html",'<div class="container-fluid fred" ng-form>\r\n\t<div ng-show="stage==\'bbox\'">\r\n\t\t<div class="row">\r\n\t\t\t<div class="col-md-12">\r\n\t\t\t\t<wizard-clip trigger="stage == \'bbox\'" drawn="drawn()" clip="data.processing.clip" bounds="data.bounds"></wizard-clip>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="row" style="height:55px">\r\n \t\t\t<div class="col-md-12">\r\n\t\t\t\t<button class="btn btn-primary pull-right" ng-disabled="!validClip(data) || checkingOrFailed" ng-click="stage=\'formats\'">Next</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="well">\r\n\t\t\t<strong style="font-size:120%">Select an area of interest.</strong> There are two ways to select your area of interest:\r\n\t\t\t<ol>\r\n\t\t\t\t<li>Draw an area on the map with the mouse by clicking a corner and while holding the left mouse button\r\n\t\t\t\t\tdown drag diagonally across the map to the opposite corner or</li>\r\n\t\t\t\t<li>Type your co-ordinates into the areas above.</li>\r\n\t\t\t</ol>\r\n\t\t\tOnce drawn the points can be modified by the overwriting the values above or drawing another area by clicking the draw button again.\r\n\t\t\tEnsure you select from the highlighted areas as the data can be quite sparse for some data.<br/>\r\n\t\t\t<p style="padding-top:5px">\r\n\t\t\t<strong>Warning:</strong> Some extracts can be huge. It is best if you start with a small area to experiment with first. An email will be sent\r\n\t\t\twith the size of the extract. Download judiciously.\r\n\t\t\t</p>\r\n\t\t\t<p style="padding-top"><strong>Hint:</strong> If the map has focus, you can use the arrow keys to pan the map.\r\n            You can zoom in and out using the mouse wheel or the "+" and "-" map control on the top left of the map. If you have made an error in the\r\n            position of your area of interest, hit the "Select an area..." button and draw a new bounding box.\r\n\t\t\t</p>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div ng-show="stage==\'formats\'">\r\n\t\t<div class="well">\r\n\t\t<div class="row">\r\n  \t\t\t<div class="col-md-3">\r\n\t\t\t\t<label for="geoprocessOutputFormat">\r\n\t\t\t\t\tOutput Format\r\n\t\t\t\t</label>\r\n\t\t\t</div>\r\n\t\t\t<div class="col-md-9">\r\n\t\t\t\t<select id="geoprocessOutputFormat" style="width:95%" ng-model="data.processing.outFormat" ng-options="opt.value for opt in config.outFormat"></select>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="row">\r\n\t\t\t<div class="col-md-3">\r\n\t\t\t\t<label for="geoprocessOutCoordSys">\r\n\t\t\t\t\tCoordinate System\r\n\t\t\t\t</label>\r\n\t\t\t</div>\r\n\t\t\t<div class="col-md-9">\r\n\t\t\t\t<select id="geoprocessOutCoordSys" style="width:95%" ng-model="data.processing.outCoordSys" ng-options="opt.value for opt in config.outCoordSys | sysIntersect : data.processing.clip"></select>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="row" style="height:55px">\r\n\t\t\t<div class="col-md-6">\r\n\t\t\t\t<button class="btn btn-primary" ng-click="stage=\'bbox\'">Previous</button>\r\n\t\t\t</div>\r\n\t\t\t<div class="col-md-6">\r\n\t\t\t\t<button class="btn btn-primary pull-right" ng-disabled="!validSansEmail(data)" ng-click="stage=\'email\'">Next</button>\r\n   \t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class="well">\r\n\t\t\t<strong style="font-size:120%">Data representation.</strong> Select how you want your data presented.<br/>\r\n\t\t\tOutput format is the structure of the data and you should choose a format compatible with the tools that you will use to manipulate the data.\r\n\t\t\t<ul>\r\n\t\t\t\t<li ng-repeat="format in outFormats"><strong>{{format.value}}</strong> - {{format.description}}</li>\r\n\t\t\t</ul>\r\n\t\t\tSelect what <i>coordinate system</i> or projection you would like. If in doubt select WGS84.<br/>\r\n\t\t\tNot all projections cover all of Australia. If the area you select is not covered by a particular projection then the option to download in that projection will not be available.\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div ng-show="stage==\'email\'">\r\n\t\t<div class="well" exp-enter="stage=\'confirm\'">\r\n\t\t\t<div download-email></div>\r\n\t\t\t<br/>\r\n\t\t\t<div download-filename data="data.processing"></div>\r\n\t\t</div>\r\n\t\t<div class="row" style="height:55px">\r\n\t\t\t<div class="col-md-6">\r\n\t\t\t\t<button class="btn btn-primary" ng-click="stage=\'formats\'">Previous</button>\r\n\t\t\t</div>\r\n\t\t\t<div class="col-md-6">\r\n\t\t\t\t<button class="btn btn-primary pull-right" ng-disabled="!allDataSet(data)" ng-click="stage=\'confirm\'">Submit</button>\r\n   \t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="well">\r\n\t\t\t<strong style="font-size:120%">Email notification</strong> The extract of data can take some time. By providing an email address we will be able to notify you when the job is complete. The email will provide a link to the extracted\r\n\t\t\tdata which will be packaged up as a single file. To be able to proceed you need to have provided:\r\n\t\t\t<ul>\r\n\t\t\t\t<li>An area of interest to extract the data (referred to as a bounding box).</li>\r\n\t\t\t\t<li>An output format.</li>\r\n\t\t\t\t<li>A valid coordinate system or projection.</li>\r\n\t\t\t\t<li>An email address to receive the details of the extraction.</li>\r\n\t\t\t\t<li><strong>Note:</strong>Email addresses need to be and are stored in the system.</li>\r\n\t\t\t</ul>\r\n\t\t\t<strong style="font-size:120%">Optional filename</strong> The extract of data can take some time. By providing an optional filename it will allow you\r\n\t\t\tto associate extracted data to your purpose for downloading data. For example:\r\n\t\t\t<ul>\r\n\t\t\t\t<li>myHouse will have a file named myHouse.zip</li>\r\n\t\t\t\t<li>Sorrento would result in a file named Sorrento.zip</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div ng-show="stage==\'confirm\'">\r\n\t\t<div class="row">\r\n\t\t\t<div class="col-md-12 abstractContainer">\r\n\t\t\t\t{{data.abstract}}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<h3>You have chosen:</h3>\r\n\t\t<table class="table table-striped">\r\n\t\t\t<tbody>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th>Area</th>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<span style="display:inline-block; width: 10em">Lower left (lat/lng&deg;):</span> {{data.processing.clip.yMin | number : 6}}, {{data.processing.clip.xMin | number : 6}}<br/>\r\n\t\t\t\t\t\t<span style="display:inline-block;width: 10em">Upper right (lat/lng&deg;):</span> {{data.processing.clip.yMax | number : 6}}, {{data.processing.clip.xMax | number : 6}}\r\n\t\t\t\t\t</td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th>Output format</th>\r\n\t\t\t\t\t<td>{{data.processing.outFormat.value}}</td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th>Coordinate system</th>\r\n\t\t\t\t\t<td>{{data.processing.outCoordSys.value}}</td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th>Email address</th>\r\n\t\t\t\t\t<td>{{email}}</td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr ng-show="data.processing.filename">\r\n\t\t\t\t\t<th>Filename</th>\r\n\t\t\t\t\t<td>{{data.processing.filename}}</td>\r\n\t\t\t\t</tr>\r\n\t\t\t</tbody>\r\n\t\t</table>\r\n\t\t<div class="row" style="height:55px">\r\n\t\t\t<div class="col-md-6">\r\n\t\t\t\t<button class="btn btn-primary" style="width:6em" ng-click="stage=\'email\'">Back</button>\r\n\t\t\t</div>\r\n\t\t\t<div class="col-md-6">\r\n\t\t\t\t<button class="btn btn-primary pull-right" ng-click="startExtract()">Confirm</button>\r\n   \t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),t.put("wizard/search/search.html",'<div>\r\n<div style="position:relative;padding:5px;padding-left:10px;" ng-controller="SearchCtrl as search" class="scrollPanel">\r\n\t<p style="text-align: left; margin: 10px; font-size: 16px;">\r\n\t\t<strong>Search</strong>\r\n\t</p>\r\n\t<form class="form-horizontal">\r\n\t\t<div class="well">\r\n\t\t\t<div class="form-group">\r\n\t\t\t\t<label for="searchFilter" class="col-sm-1 control-label">Filter</label>\r\n\t\t\t\t<div class="col-sm-11">\r\n\t\t\t\t\t<input placeholder=\'Leave blank to match all, type to filter results\' type="text" class="form-control" ng-keyup="search.search()" ng-model="search.filter" ></input>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<span ng-show="search.data.response.docs">\r\n\t\t\t\t\t<strong>Showing</strong> {{search.data.response.docs.length}} of {{search.data.response.numFound}} <strong>matches. </strong>\r\n\t\t\t\t\t({{search.data.responseHeader.QTime/ 1000}} seconds)\r\n\t\t\t\t\t<span ng-show="search.data.responseHeader" class="pull-right">\r\n\r\n\t\t\t\t\t\t<div class="btn-group" dropdown style="padding-right:1em">\r\n\t\t\t\t\t\t\t<button type="button" class="undecorated" bathy-bbox-show-all style="padding-left:5em">\r\n\t\t\t\t\t\t\t\tShow all data extents\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t    <button type="button" class="undecorated dropdown-toggle" dropdown-toggle title="Restrict datasets based on area of coverage">\r\n        \t\t\t\t\t\t<span class="caret"></span>\r\n        \t\t\t\t\t\t<span class="sr-only">More options for showing and hiding datasets\' extents based on size and if only some are viewable.</span>\r\n      \t\t\t\t\t\t</button>\r\n      \t\t\t\t\t\t<ul class="dropdown-menu" role="menu">\r\n        \t\t\t\t\t\t<li><a role="button" href="javascript:;" bathy-bbox-show-visible  tooltip="Show only those datasets that have all of their data within the current viewable map">Show fully visible</a></li>\r\n        \t\t\t\t\t\t<li><a role="button" href="javascript:;" bathy-bbox-hide-all  tooltip="Hide all datasets\' bounding area. ">Hide all</a></li>\r\n      \t\t\t\t\t\t</ul>\r\n    \t\t\t\t\t</div>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<div class="container-fluid">\r\n\t\t\t\t\t<bathy-extent></bathy-extent>\r\n\t\t\t\t\t<bathy-facetenable></bathy-facetenable>\r\n\t\t\t\t\t<bathy-daterange></bathy-daterange>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</form>\r\n\r\n\t<div class="container" style="width:100%">\r\n\t\t<div class="row" ng-repeat="doc in search.data.response.docs">\r\n\t\t\t<div class="col-md-12"  ng-class-odd="\'odd\'" ng-class-even="\'even\'" ng-mouseleave="search.lolight(doc)" ng-mouseenter="search.hilight(doc)">\r\n\t\t\t\t<span ng-class="{ellipsis:!expanded}" style="width:100%;display:inline-block;">\r\n\t\t\t\t\t<button type="button" class="undecorated" ng-click="expanded = !expanded" title="Click to see more about this dataset" tooltip-placement="right" tooltip="Show more details.">\r\n\t\t\t\t\t\t<i class="fa pad-right fa-2x" ng-class="{\'fa-caret-down\':expanded,\'fa-caret-right\':(!expanded)}"></i>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<download-add item="doc"></download-add>\r\n\t\t\t\t\t<bathy-wms data="doc"></bathy-wms>\r\n\t\t\t\t\t<bathy-bbox data="doc" ng-if="doc.showExtent"></bathy-bbox>\r\n\t\t\t\t\t<a href="http://www.ga.gov.au/metadata-gateway/metadata/record/{{doc.sysId}}" target="_blank" ><strong>{{doc.title}}</strong></a>\r\n\t\t\t\t</span>\r\n\t\t\t\t<span ng-class="{ellipsis:!expanded}" style="width:100%;display:inline-block;padding-right:15px;"\r\n\t\t\t\t\t\ttooltip-enable="!expanded" tooltip-class="searchAbstractTooltip" tooltip="{{doc.abstract | truncate : 250}}" >\r\n\t\t\t\t\t<download-actions doc="doc" ng-show="expanded"></download-actions>\r\n\t\t\t\t\t{{doc.abstract}}\r\n\t\t\t\t</span>\r\n\t\t\t\t<div ng-show="expanded">\r\n\t\t\t\t\t<h6>Authors</h6>\r\n\t\t\t\t\t{{doc.author | authors}}\r\n\t\t\t\t\t<h6>Keywords</h6>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<span class="badge" ng-repeat="keyword in doc.keywords track by $index">{{keyword}}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n</div>')}]);