"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}angular.module("bathy.bounds",[]).directive("bathyBounds",["flashService","messageService","boundsService",function(t,e,n){var a=void 0;return{restrict:"AE",link:function(){n.init().then(null,null,function(n){switch(t.remove(a),n.type){case"error":case"warn":case"info":e[n.type](n.text);break;default:t.remove(a),a=t.add(n.text,n.duration?n.duration:8e3,"wait"===n.type)}})}}}]).factory("boundsService",["$http","$q","$rootScope","$timeout","configService","flashService",function(t,e,n,a,r,i){function o(t,e,n){g&&g.notify({text:t,type:e,duration:n})}function s(t){var n=e.defer(),r=u(t);if(r&&r.code)switch(r.code){case"oversize":a(function(){o("","clear"),o("The selected area is too large to process. Please restrict to approximately 2 degrees square.","error"),n.resolve(r)});break;case"undersize":a(function(){o("","clear"),o("X Min and Y Min should be smaller than X Max and Y Max, respectively. Please update the drawn area.","error"),n.resolve(r)});break;default:return e.when(r)}return n.promise}function l(t){var e=(t.xMax-t.xMin)*(t.yMax-t.yMin);return e<1e-11||t.xMax<t.xMin}function c(t){var e=Math.abs((t.xMax-t.xMin)*(t.yMax-t.yMin));return e>144}function d(t){t.xMax=null===t.xMax?null:+t.xMax,t.xMin=null===t.xMin?null:+t.xMin,t.yMax=null===t.yMax?null:+t.yMax,t.yMin=null===t.yMin?null:+t.yMin}function u(t){return d(t),c(t)?{code:"oversize"}:l(t)?{code:"undersize"}:null===t.xMax?{code:"incomplete"}:h(t)?{code:"success"}:{code:"invalid"}}function h(t){return t&&angular.isNumber(t.xMax)&&angular.isNumber(t.xMin)&&angular.isNumber(t.yMax)&&angular.isNumber(t.yMin)&&!c(t)&&!l(t)}function p(e){r.getConfig("processing").then(function(a){var r=a.intersectsUrl;if(r){var i=r.replace("{maxx}",e.xMax).replace("{minx}",e.xMin).replace("{maxy}",e.yMax).replace("{miny}",e.yMin);o("Checking there is data in your selected area...","wait",18e4),t.get(i).then(function(t){if(t.data&&t.data.available_data){var e="There is no data held in your selected area. Please try another area.";o("","clear"),t.data.available_data&&t.data.available_data.forEach(function(t){t.downloadables&&(e="There is intersecting data. Select downloads from the list.")}),o(e,null,4e3),n.$broadcast("site.selection",t.data)}},function(t){o("The service that provides the list of datasets is currently unavailable. Please try again later.","error")})}})}var g=void 0;return{init:function(){return g=e.defer(),n.$on("bathy.clip.drawn",function(t,e){o("Area drawn. Checking for data..."),s(e).then(function(t){"success"===t.code?(n.$broadcast("bathy.bounds.draw",[e.xMin,e.yMin,e.xMax,e.yMax]),p(e)):n.$broadcast("bathy.clip.draw",{message:"oversize"})})}),g.promise},cancelDraw:function(){drawService.cancelDrawRectangle()},checkSize:function(t){return s(t)}}}]),angular.module("bathy.autoscroll",[]).directive("autoScroll",["$timeout","$rootScope",function(t,e){return{scope:{trigger:"@",y:"@",height:"@"},link:function(n,a,r){var i,o,s;s=n.height?+n.height:100,o=s,a.on("scroll",function(l){var c,d,u=a.scrollTop(),h=a.find(r.autoScroll),p=h.height(),g=a.height();g>=p||(c=p-u-g,d=o<c,o=c,c<s&&!d&&(i&&t.cancel(i),i=t(function(){e.$broadcast(n.trigger)},30)))})}}}]);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),DaterangeCtrl=function(){function t(e,n){_classCallCheck(this,t),this.MAX=240,this.MIN=0,this.data=n.getDaterange()}return _createClass(t,[{key:"change",value:function(){daterangeService.changed()}},{key:"slider",value:function(){$timeout.cancel(this.timeout),this.timeout=$timeout(function(){daterangeService.changed()},200)}},{key:"formatter",value:function(t){if(angular.isArray(t)){var e=t[1],n=t[0];return void 0===n||n===this.MIN?(n="Earliest",this.data&&(this.data.lower=null)):(n=this.convertToDate(n),n=n.getMonth()+1+"/"+n.getFullYear(),this.data&&(this.data.lower=n)),void 0===e||e===this.MAX?(e="newest",this.data&&(this.data.upper=null)):(e=this.convertToDate(e),e=e.getMonth()+1+"/"+e.getFullYear(),this.data&&(this.data.upper=e)),this.slider(),n+" to "+e}}},{key:"convertToDate",value:function(t){var e=new Date;if(void 0!==t)return e.setMonth(e.getMonth()-(this.MAX-t)),e}}]),t}();DaterangeCtrl.$inject=["$timeout","daterangeService"];var DaterangeService=function t(e,n){return _classCallCheck(this,t),{getDaterange:function(){return n.getDaterange()},changed:function(){e.info("Refreshing.."),n.refresh()}}};DaterangeService.$inject=["$log","searchService"],angular.module("bathy.daterange",[]).directive("bathyDaterange",[function(){return{restrict:"AE",templateUrl:"bathy/daterange/daterange.html",controller:"DaterangeCtrl",link:function(t,e,n,a){t.change=function(){a.change()}}}}]).directive("bathyDaterangeSlider",[function(){return{restrict:"AE",require:"^bathyDaterange",template:'<slider min="0" max="240" step="1" value="[0,240]" range="true" ng-model="daterange.range" formatter="daterange.formatter"></slider>',link:function(t,e,n,a){t.daterange=a}}}]).controller("DaterangeCtrl",DaterangeCtrl).factory("daterangeService",DaterangeService);var ExtentService=function e(t,n){function a(){t.getMap().then(function(t){t.on("moveend",r),t.on("zoomend",r),r()})}function r(){t.getMap().then(function(t){var e=t.getBounds();i.yMin=e.getSouth(),i.xMin=e.getWest(),i.yMax=e.getNorth(),i.xMax=e.getEast(),n.refresh()})}_classCallCheck(this,e);var i=n.getSearchCriteria().bbox;return i.fromMap&&a(),{getParameters:function(){return i}}};ExtentService.$inject=["mapService","searchService"],angular.module("bathy.extent",["explorer.switch"]).directive("bathyExtent",["extentService",function(t){return{restrict:"AE",templateUrl:"bathy/extent/extent.html",controller:["$scope",function(e){e.parameters=t.getParameters()}],link:function(t,e,n){}}}]).factory("extentService",ExtentService);var RootCtrl=function n(t,e){var a=this;_classCallCheck(this,n),e.getMap().then(function(t){a.map=t}),t.getConfig().then(function(t){a.data=t})};RootCtrl.$invoke=["configService","mapService"],angular.module("BathyApp",["explorer.config","explorer.confirm","explorer.enter","explorer.flasher","explorer.googleanalytics","explorer.httpdata","explorer.info","explorer.legend","explorer.message","explorer.modal","explorer.persist","explorer.projects","explorer.tabs","explorer.version","exp.ui.templates","explorer.map.templates","ui.bootstrap","ngAutocomplete","ngRoute","ngSanitize","page.footer","geo.baselayer.control","geo.draw","geo.map","geo.maphelper","geo.measure","bathy.autoscroll","bathy.bounds","bathy.clip","bathy.datasets","bathy.daterange","bathy.extent","bathy.glossary","bathy.header","bathy.help","bathy.legend","bathy.maps","bathy.panes","bathy.plot","bathy.reset","bathy.restrict.pan","bathy.select","bathy.side-panel","bathy.splash","bathy.start","bathy.tabs","bathy.templates","bathy.toolbar","bathy.wms"]).config(["configServiceProvider","persistServiceProvider","projectsServiceProvider","versionServiceProvider",function(t,e,n,a){t.location("bathy/resources/config/config.json"),t.dynamicLocation("bathy/resources/config/configclient.json?"),a.url("bathy/assets/package.json"),e.handler("local"),n.setProject("bathy")}]).controller("RootCtrl",RootCtrl).filter("bytes",function(){return function(t,e){if(isNaN(parseFloat(t))||!isFinite(t))return"-";"undefined"==typeof e&&(e=0);var n=["bytes","kB","MB","GB","TB","PB"],a=Math.floor(Math.log(t)/Math.log(1024));return(t/Math.pow(1024,Math.floor(a))).toFixed(e)+" "+n[a]}}),angular.module("bathy.elevation",["graph","explorer.crosshair","explorer.flasher","explorer.feature.summary","geo.map","geo.path"]).directive("pathElevationPlot",["$log","$timeout","$rootScope","$filter","elevationService","crosshairService","featureSummaryService",function(t,e,n,a,r,i,o){var s={fill:"orange",fillOpacity:.4,stroke:"darkred",strokeWidth:1.5},l={fill:"lightblue",fillOpacity:.8,stroke:"darkblue",strokeWidth:1.5},c='<span><img alt="Waiting..." src="resources/img/tinyloader.gif" ng-show="message.spinner" style="position:relative;top:2px;" width="12"></img></span>';return{templateUrl:"bathy/elevation/elevation.html",scope:!0,controller:["$scope",function(t){t.paths=[],t.config={yLabel:"Elevation (m)",xLabel:"Distance: 3000m"},n.$on("elevation.plot.data",function(e,n){t.length=n.length,t.geometry=n.geometry,t.config.xLabel="Distance: "+a("length")(n.length,!0),t.waterTable=null,t.length&&t.geometry&&(r.getElevation(t.geometry,t.length).then(function(e){t.elevation={style:s,data:e},t.config.leftText="Elevation Range: "+a("length")(d3.min(e,function(t){return t.z}),!0)+" to "+a("length")(d3.max(e,function(t){return t.z}),!0),t.paths=[t.elevation]}),r.intersectsWaterTable(t.geometry).then(function(e){t.intersectsWaterTable=e}))}),t.getInfoText=function(){t.infoText||(t.infoText=c,r.getInfoText().then(function(e){t.infoText=e}))},t.toggleWaterTable=function(){var n=t.paths.length;t.paths=[],t.waterTable?e(function(){1===n?t.paths=[t.elevation,t.waterTable]:t.paths=[t.elevation]}):r.getWaterTable(t.geometry,t.length).then(function(e){t.waterTable={style:l,data:e},t.paths=[t.elevation,t.waterTable]})},t.close=function(){t.paths=t.geometry=t.length=null}}],link:function(e,n){function a(){e.line&&(e.line=r.pathHide(e.line)),e.geometry?e.line=r.pathShow(e.geometry):r.hideWaterTable()}function s(){t.info("Deferred view"),o.deferView(e.position).then(function(t){e.featuresUnderPoint=t})}function l(){t.info("Cancel deferred view"),o.cancelView(),e.featuresUnderPoint=null}e.graphClick=function(t){if(t.position){var n=t.position.points[0].point;r.panToPoint(n),e.point=n}},e.graphLeave=function(n){e.position=null,i.remove(),l(),t.debug("Mouse left"),e.mapListener&&(t.info("offMapMove"),o.offMapMove(e.mapListener))},e.graphEnter=function(e){t.debug("Graph be entered")},e.graphMove=function(n){var a;e.position=n.position,e.position&&(a=e.position.point,window.eve=n,e.position.markerLonlat=i.move(a),s()),e.mapListener||(e.mapListener=function(){l(),s()},t.info("onMapMove"),o.onMapMove(e.mapListener)),t.debug("Mouse moving...")},e.$watch("geometry",a)}}}]).directive("marsPanTo",["$rootScope","mapService",function(t,e){var n={eventName:"elevation.plot.data",options:{paddingTopLeft:[50,50],paddingBottomRight:[50,250]}};return{restrict:"AE",scope:{eventName:"=",options:"="},link:function(a){angular.forEach(n,function(t,e){"undefined"==typeof a[e]&&(a[e]=t)}),t.$on(a.eventName,function(t,n){var r=L.polyline(n.geometry),i=r.getBounds();e.getMap().then(function(t){t.fitBounds(i,a.options)})})}}}]).directive("marsInfoElevation",["$log","elevationService",function(t,e){return{templateUrl:"bathy/elevation/elevationInfo.html",scope:!0,link:function(t,n){t.toggleWaterTableShowing=function(){t.state=e.getState(),e.isWaterTableShowing()?e.hideWaterTable():e.showWaterTable()}}}}]).provider("elevationService",function(){var t,e=500,n="service/path/elevation",a="service/path/waterTable",r="service/artesianBasin/geometry/kml",i="service/artesianBasin/intersects",o=null,s={isWaterTableShowing:!1};this.setIntersectUrl=function(t){i=t},this.setKmlUrl=function(t){r=t},this.setElevationUrl=function(t){n=t},this.setWaterTableUrl=function(t){a=t},this.$get=["$log","$http","$q","$timeout","mapService","flashService",function(a,l,c,d,u,h){function p(t){function e(){var t=c.defer();return d(function(){var e=d3.select("body").append("svg").attr("width",0).attr("height",0),n=e.append("path").data([o]).attr("d",d3.svg.line().tension(0).interpolate("cardinal-closed")),r=n[0][0],i=r.getTotalLength(),s=Array.apply(null,Array(a)).map(function(t,e){var n=r.getPointAtLength(i/a*e);return[n.x,n.y]});e.remove(),t.resolve(s)}),t.promise}function n(){var t=c.defer(),e=new XMLHttpRequest;return e.addEventListener("load",function(e){var n=new GeotiffParser;n.parseHeader(e.target.response);var a=n.loadPixels();t.resolve(a)},!1),e.addEventListener("progress",function(e){t.notify(e)},!1),e.addEventListener("error",function(e){t.reject(e)},!1),e.crossOrigin="",e.open("GET",b,!0),e.responseType="arraybuffer",e.send(null),t.promise}var a=500,r=c.defer(),i="http://www.ga.gov.au/gisimg/services/topography/dem_s_1s/ImageServer/WCSServer?SERVICE=WCS&VERSION=1.0.0&REQUEST=GetCoverage&coverage=1&CRS=EPSG:4326&BBOX={bbox}&FORMAT=GeoTIFF&RESX={resx}&RESY={resy}&RESPONSE_CRS=EPSG:4326&HEIGHT={resy}&WIDTH={resx}",o=[],s=-181,l=-91,u=181,h=91;t.forEach(function(t){o.push([t.lat,t.lng]),s=Math.max(s,t.lng),l=Math.max(l,t.lat),u=Math.min(u,t.lng),h=Math.min(h,t.lat)}),u>=s&&(s=u+1e-5),h>=l&&(l=h+1e-5);var p=u+","+h+","+s+","+l,g=s-u,f=l-h,v=g/f,m=500,y=500;v<1?y=Math.ceil(y*v):m=Math.ceil(m/v),console.log(p+"\n"+y+"\n"+m);var b=i.replace(/(\{resx\})/g,y).replace(/(\{resy\})/g,m).replace("{bbox}",p);return c.all([e(),n()]).then(function(t){console.log("WCS lenght = "+t[1].length);var e=t[0].map(function(e){var n=e[1],a=e[0],r=Math.min(Math.floor((n-u)/g*y),y-1),i=Math.min(Math.floor((a-h)/f*m),m-1);return console.log(r+i*y+"\n"+r+" "+i),{x:n,y:a,z:t[1][r+(m-i)*y]}});r.resolve(e)}),r.promise}u.getMap().then(function(e){t=e});var g={panToPoint:function(t){u.zoomTo(t.y,t.x)},getState:function(){return s},getElevation:function(t,a){var r=h.add("Retrieving elevation details...",8e3),i=Exp.Util.toLineStringWkt(t);return l.post(n,{wkt:i,count:e,distance:a}).then(function(t){return h.remove(r),t.data})},intersectsWaterTable:function(t){var e=i+(i.indexOf("?")>-1?"":"?wkt=");return l.get(e+Exp.Util.toLineStringWkt(t),{cache:!0}).then(function(t){return t.data.intersects})},isWaterTableShowing:function(){return s.isWaterTableShowing=null!==o},showWaterTable:function(){o||this.getWaterTableLayer().then(function(e){e.addTo(t)}),s.isWaterTableShowing=!0},hideWaterTable:function(){o&&t.removeLayer(o),o=null,s.isWaterTableShowing=!1},createWaterTableLayer:function(){return u.getMap().then(function(t){var e=new L.KML(r,{async:!0});return e.on("loaded",function(t){return o=t.target})})},getWaterTableLayer:function(){return this.createWaterTableLayer()},getWaterTable:function(t,e){h.add("Retrieving water table details...",8e3),Exp.Util.toLineStringWkt(t);return p(t)},getInfoText:function(){return l("map/elevation/elevationInfo.html",{cache:!0}).then(function(t){return t.data})},pathShow:function(e){var n=L.polyline(e,{color:"red",weight:3,opacity:.8}).addTo(t);return n},pathHide:function(e){return t.removeLayer(e),null}};return g}]});var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),GlossaryService=function(){function t(e){_classCallCheck(this,t),this.$http=e,this.TERMS_SERVICE="bathy/resources/config/glossary.json"}return _createClass(t,[{key:"getTerms",value:function(){return this.$http.get(this.TERMS_SERVICE,{cache:!0}).then(function(t){return t.data})}}]),t}();GlossaryService.$inject=["$http"];var GlossaryCtrl=function a(t,e){var n=this;_classCallCheck(this,a),t.info("GlossaryCtrl"),e.getTerms().then(function(t){n.terms=t})};GlossaryCtrl.$inject=["$log","glossaryService"],angular.module("bathy.glossary",[]).directive("bathyGlossary",[function(){return{templateUrl:"bathy/glossary/glossary.html"}}]).controller("GlossaryCtrl",GlossaryCtrl).service("glossaryService",GlossaryService);var MapsCtrl=function r(t,e,n,a){_classCallCheck(this,r);L.layerGroup([]),{download:a.getLayerGroup(),select:n.getLayerGroup()}};MapsCtrl.$inject=["$rootScope","mapService","selectService","downloadService"],angular.module("bathy.groups",[]).factory("GroupsCtrl",MapsCtrl),angular.module("bathy.header",[]).controller("headerController",["$scope","$q","$timeout",function(t,e,n){var a=function(t){return t};t.$on("headerUpdated",function(e,n){t.headerConfig=a(n)})}]).directive("bathyHeader",[function(){var t={heading:"ICSM",headingtitle:"ICSM",helpurl:"help.html",helptitle:"Get help about ICSM",helpalttext:"Get help about ICSM",skiptocontenttitle:"Skip to content",skiptocontent:"Skip to content",quicklinksurl:"/search/api/quickLinks/json?lang=en-US"};return{transclude:!0,restrict:"EA",templateUrl:"bathy/header/header.html",scope:{breadcrumbs:"=",heading:"=",headingtitle:"=",helpurl:"=",helptitle:"=",helpalttext:"=",skiptocontenttitle:"=",skiptocontent:"=",quicklinksurl:"="},link:function(e,n,a){angular.copy(t);angular.forEach(t,function(t,n){n in e||(e[n]=t)})}}}]).factory("headerService",["$http",function(){}]);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),HelpService=function(){function t(e){_classCallCheck(this,t),this.$http=e,this.FAQS_SERVICE="bathy/resources/config/faqs.json"}return _createClass(t,[{key:"getFaqs",value:function(){return this.$http.get(this.FAQS_SERVICE,{cache:!0}).then(function(t){return t.data})}}]),t}();HelpService.$inject=["$http"];var HelpCtrl=function i(t,e){var n=this;_classCallCheck(this,i),t.info("HelpCtrl"),e.getFaqs().then(function(t){n.faqs=t})};HelpCtrl.$inject=["$log","helpService"],angular.module("bathy.help",[]).directive("bathyHelp",[function(){return{templateUrl:"bathy/help/help.html"}}]).directive("bathyFaqs",[function(){return{restrict:"AE",templateUrl:"bathy/help/faqs.html",scope:{faqs:"="},link:function(t){t.focus=function(t){$("#faqs_"+t).focus()}}}}]).controller("HelpCtrl",HelpCtrl).service("helpService",HelpService),angular.module("bathy.legend",[]).directive("legend",function(t){return{restrict:"AE",templateUrl:"bathy/legend/legend.html"}}).directive("legendButton",["panelSideFactory",function(t){var e="legend";return{restrict:"AE",scope:{},templateUrl:"bathy/legend/button.html",link:function(n){n.toggle=function(){t.setLeft(e)}}}}]);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),MapsCtrl=function(){function t(e){_classCallCheck(this,t),this.mapService=mapService}return _createClass(t,[{key:"toggleLayer",value:function(t){this.mapsService.toggleShow(t)}}]),t}();MapsCtrl.$inject=["mapsService"];var MapsService=function(){function t(e,n){_classCallCheck(this,t),this.CONFIG_KEY="layersTab",this.configService=e,this.mapService=n,this.configService=e}return _createClass(t,[{key:"getConfig",value:function(){return this.configService.getConfig(this.CONFIG_KEY)}},{key:"toggleShow",value:function(t,e){var n=this;this.configService.getConfig(this.CONFIG_KEY).then(function(e){t.layer?(t.displayed=!1,n.mapService.removeFromGroup(t,e.group)):(n.mapService.addToGroup(t,e.group),t.displayed=!0)})}}]),t}();MapsService.$inject=["configService","mapService"],angular.module("bathy.maps",["explorer.layer.slider"]).directive("bathyMaps",["mapsService",function(t){return{templateUrl:"bathy/maps/maps.html",link:function(e){t.getConfig().then(function(t){e.layersTab=t})}}}]).controller("MapsCtrl",MapsCtrl).service("mapsService",MapsService),angular.module("bathy.panes",[]).directive("bathyPanes",["$rootScope","$timeout","mapService",function(t,e,n){return{templateUrl:"bathy/panes/panes.html",scope:{defaultItem:"@",data:"="},controller:["$scope",function(a){var r=!1;a.view=a.defaultItem,a.setView=function(e){var i=a.view;a.view===e?(e&&(r=!0),a.view=""):(e||(r=!0),a.view=e),t.$broadcast("view.changed",a.view,i),r&&n.getMap().then(function(t){t._onResize()})},e(function(){t.$broadcast("view.changed",a.view,null)},50)}]}}]),angular.module("bathy.plot",[]).directive("bathyPlot",["$log",function(t){return{restrict:"AE",scope:{line:"="},link:function(e,n,a,r){e.$watch("line",function(e,n){t.info(e)})}}}]),angular.module("bathy.reset",[]).directive("resetPage",function(t){return{restrict:"AE",scope:{},templateUrl:"bathy/reset/reset.html",controller:["$scope",function(e){e.reset=function(){t.location.reload()}}]}});var servicesFactory=function(t){function e(t){this.uris=t,this.container={wms:null},t?this.services=t.map(function(t){var e=new n(t);return this.container.wms=e.isWms()?e:this.container.wms,e}.bind(this)):this.services=[],this.hasWms=function(){return null!==this.container.wms},this.getWms=function(){return this.container.wms},this.remove=function(){this.services.forEach(function(t){t.remove()})}}function n(t){var e=$(t);this.protocol=e.attr("protocol"),this.url=e.text(),this.layerNames=e.attr("layerNames"),this.name=e.attr("name"),this.description=e.attr("description"),this.handlers=[],this.isWfs=function(){return this.protocol==a.WFS},this.isWms=function(){return this.protocol==a.WMS},this.isSupported=function(){return"undefined"==typeof a[this.protocol]},this.addHandler=function(t){this.handlers.push(t)},this.removeHandler=function(t){this.handlers.push(t)},this.remove=function(){this.handlers.forEach(function(t){this.callback.remove&&t.remove(this)}.bind(this)),this.handlers=[]}}var a={WFS:"OGC:WFS",WMS:"OGC:WMS"};return new e(t)},SelectService=function(t,e,n,a,r,i){function o(){a(function(){g._executeQuery()},100)}var s,l="Search Layers",c="bathy/resources/config/select.json",d={text:"",daterange:{enabled:!1,upper:null,lower:null},bbox:{fromMap:!0,intersects:!0,yMax:null,yMin:null,xMax:null,xMin:null},defaultKeywords:[],keywords:[]},u={},h="#ff7800",p="darkblue",g={getSelectCriteria:function(){return d},getLayerGroup:function(){return s||(s=r.getGroup(l)),s},setKeywords:function(t){},setFilter:function(t){},refresh:function(){},getDaterange:function(){return d.daterange},more:function(){},_executeQuery:function(){t.get(c,{cache:!0}).then(function(t){g.getLayerGroup();var e=t.data;e.response.docs.forEach(function(t){g._decorateDataset(t),"group"==t.type&&t.docs.forEach(function(t){g._decorateDataset(t)})}),n.$broadcast("select.facet.counts",e),n.$broadcast("select.results.received",e)})},createLayer:function(t,e){var n,a,r,i=t.bbox,o=t.primaryId;if(r=u[o],!r){if(!i)return null;if(n=i.split(" "),4!=n.length)return null;e||(e=h),a=[[+n[1],+n[0]],[+n[3],+n[2]]],r=L.rectangle(a,{fill:!1,color:"#000000",width:3,clickable:!1}),u[o]=r}return this._decorateDataset(t),s.addLayer(r),r},_decorateDataset:function(t){function e(t){var e;return t?(e=t.split(/\s/g),{xMin:+e[0],xMax:+e[2],yMax:+e[3],yMin:+e[1]}):null}var n=u[t.primaryId];n?(t.layer=n,t.showLayer=!0):(t.layer=null,t.showLayer=!1,t.services=servicesFactory(t.dcUris),t.bounds=e(t.bbox))},showWithin:function(t){function e(t,e,n,a){var r=d.bbox;return t>r.xMin&&n<r.xMax&&e>r.yMin&&a<r.yMax}t.forEach(function(t){var n,a=t.bbox;a?(n=a.split(" "),4==n.length&&e(+n[0],+n[1],+n[2],+n[3])?g.createLayer(t):g.removeLayer(t)):g.removeLayer(t)})},toggle:function(t){t.showLayer?this.removeLayer(t):this.createLayer(t)},toggleAll:function(t){var e=this,n=t.some(function(t){return!t.showLayer});return t.forEach(function(t){n?t.showLayer||e.createLayer(t):t.showLayer&&e.removeLayer(t)}),!n},hideAll:function(t){t.forEach(function(t){t.showLayer&&g.removeLayer(t)})},hilight:function(t){t.setStyle({color:p})},lolight:function(t){t.setStyle({color:h})},removeLayer:function(t){var e=t.primaryId,n=u[e];n&&(s.removeLayer(n),delete u[e]),this._decorateDataset(t)}};return o(),g};SelectService.$inject=["$http","$q","$rootScope","$timeout","mapService","configService"],angular.module("bathy.select.service",[]).factory("selectService",SelectService);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),SelectCtrl=function(){function t(e,n,a,r){var i=this;_classCallCheck(this,t),this.flashService=a,this.selectService=r,e.$on("select.results.received",function(t,e){a.remove(i.flasher),i.data=e}),n.getConfig("facets").then(function(t){i.hasKeywords=t&&t.keywordMapped&&t.keywordMapped.length>0})}return _createClass(t,[{key:"select",value:function(){this.flashService.remove(this.flasher),this.flasher=this.flashService.add("Selecting",3e3,!0),this.selectService.setFilter(this.filter)}},{key:"toggle",value:function(t){this.selectService.toggle(t)}},{key:"toggleAll",value:function(){this.selectService.toggleAll(this.data.response.docs)}},{key:"showWithin",value:function(){this.selectService.showWithin(this.data.response.docs)}},{key:"allShowing",value:function(){return!(!this.data||!this.data.response)&&!this.data.response.docs.some(function(t){return!t.showLayer})}},{key:"anyShowing",value:function(){return!(!this.data||!this.data.response)&&this.data.response.docs.some(function(t){return t.showLayer})}},{key:"hideAll",value:function(){this.selectService.hideAll(this.data.response.docs)}},{key:"hilight",value:function(t){t.layer&&this.selectService.hilight(t.layer)}},{key:"lolight",value:function(t){t.layer&&this.selectService.lolight(t.layer)}}]),t}();SelectCtrl.$inject=["$rootScope","configService","flashService","selectService"];var SelectCriteriaCtrl=function(){function t(e){_classCallCheck(this,t),this.criteria=e.getSelectCriteria(),this.selectService=e}return _createClass(t,[{key:"refresh",value:function(){selectService.refresh()}}]),t}();SelectCriteriaCtrl.$inject=["selectService"],angular.module("bathy.select",["bathy.select.service"]).controller("SelectCtrl",SelectCtrl).controller("SelectCriteriaCtrl",SelectCriteriaCtrl).directive("bathySelect",[function(){return{templateUrl:"bathy/select/select.html",link:function(t,e,n){console.log("Hello select!")}}}]).directive("selectDoc",[function(){return{templateUrl:"bathy/select/doc.html",link:function(t,e,n){console.log("What's up doc!")}}}]).directive("selectGroup",[function(){return{templateUrl:"bathy/select/group.html",scope:{group:"="},link:function(t,e,n){console.log("What's up doc!")}}}]).filter("pubDate",function(){return function(t){var e;return t?(e=new Date(t),e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()):"-"}}).filter("authors",function(){return function(t){return t?t.join(", "):"-"}}).filter("truncate",function(){return function(t,e){return t&&t.length>e-3?t.substr(0,e-3)+"...":t}}),angular.module("bathy.splash",[]).directive("bathySplash",["$rootScope","$modal","$log","splashService",function(t,e,n,a){return{controller:["$scope","splashService",function(t,e){t.acceptedTerms=!0,e.getReleaseNotes().then(function(n){t.releaseMessages=n,t.acceptedTerms=e.hasViewedSplash()})}],link:function(r,i){var o;r.$watch("acceptedTerms",function(t){t===!1&&(o=e.open({templateUrl:"bathy/splash/splash.html",size:"lg",backdrop:"static",keyboard:!1,controller:["$scope","$modalInstance","acceptedTerms","messages",function(t,e,n,a){t.acceptedTerms=n,t.messages=a,t.accept=function(){e.close(!0)}}],resolve:{acceptedTerms:function(){return r.acceptedTerms},messages:function(){return r.releaseMessages}}}),o.result.then(function(t){n.info("Accepted terms"),r.acceptedTerms=t,a.setHasViewedSplash(t)},function(){n.info("Modal dismissed at: "+new Date)}))}),t.$on("logoutRequest",function(){userService.setAcceptedTerms(!1)})}}}]).factory("splashService",["$http",function(t){function e(t){t?sessionStorage.setItem(a,!0):sessionStorage.removeItem(a)}function n(){return!!sessionStorage.getItem(a)}var a="bathy.accepted.terms",r="bathy/resources/config/releasenotes.json";return{getReleaseNotes:function(){return t({method:"GET",url:r+"?t="+Date.now()}).then(function(t){return t.data})},hasViewedSplash:n,setHasViewedSplash:e}}]).filter("priorityColor",[function(){var t={IMPORTANT:"red",HIGH:"blue",MEDIUM:"orange",LOW:"gray"};return function(e){return e in t?t[e]:"black"}}]).filter("wordLowerCamel",function(){return function(t){return t.charAt(0)+t.substr(1).toLowerCase()}}).filter("sortNotes",[function(){return function(t){if(t){var e=t.slice(0).sort(function(t,e){return t.priority==e.priority?t.lastUpdate==e.lastUpdate?0:e.lastUpdate-t.lastUpdate:"IMPORTANT"==t.priority?-11:1});return e}}}]),angular.module("bathy.side-panel",[]).factory("panelSideFactory",function(){function t(t,e){var n=t.active;return n===e?(t.active=null,t.width=0):t.active=e,!n}var e={left:{active:null,width:0},right:{active:null,width:0}};return{state:e,setLeft:function(n){var a=t(e.left,n);return a&&(e.left.width=320),a},setRight:function(n){return e.right.width=n.width,t(e.right,n.name)}}}).directive("sidePanelRight",["panelSideFactory",function(t){return{restrict:"E",transclude:!0,templateUrl:"bathy/side-panel/side-panel-right.html",link:function(e){e.right=t.state.right,e.closePanel=function(){t.setRight({name:null,width:0})}}}}]).directive("panelTrigger",["panelSideFactory",function(t){return{restrict:"E",transclude:!0,templateUrl:"bathy/side-panel/trigger.html",scope:{"default":"@?",panelWidth:"@",name:"@",iconClass:"@",panelId:"@"},link:function(e){e.toggle=function(){t.setRight({width:e.panelWidth,name:e.panelId})},e["default"]&&t.setRight({width:e.panelWidth,name:e.panelId})}}}]).directive("sidePanelLeft",["panelSideFactory",function(t){return{restrict:"E",transclude:!0,templateUrl:"bathy/side-panel/side-panel-left.html",link:function(e){e.left=t.state.left,e.closeLeft=function(){t.setLeft(null)}}}}]),angular.module("bathy.tabs",[]).directive("tabsMain",["$rootScope",function(t){return{templateUrl:"bathy/tabs/tabs.html"}}]).directive("bathyMapsOld",["$rootScope",function(t){return{templateUrl:"bathy/tabs/maps.html",controller:"customMapsController"}}]).controller("customMapsController",["$scope","rocksAssetService",function(t,e){e.getRfcs().then(function(e){t.rfcs=e}),t.toggleRfcShow=function(){var t=this.rfc;t.displayed=t.handleShow()},t.makeRfcActive=function(){t.active=this.rfc}}]).factory("bathyAssetService",["$rootScope","$q","$timeout","$http","layerService","mapService",function(t,e,n,a,r,i){return{getRfcs:function(){return e.all([i.getMap(),a.get("resources/config/rocks/custom-assets.json",{cache:!0})]).then(function(t){var e=t[0],n=t[1].data,a=[];return angular.forEach(n,function(t){var n=r.decorate(t);n.map=e,n.addToMap(),a.push(n)}),a})}}}]).filter("countGreaterThanZero",[function(){return function(t){return t?t.filter(function(t){return t.count&&t.count>0}):[]}}]),angular.module("bathy.restrict.pan",[]).directive("restrictPan",["mapService",function(t){return{restrict:"AE",scope:{bounds:"="},link:function(e){t.getMap().then(function(t){var n=e.bounds,a=n[0],r=n[1],i=L.latLng(a[0],a[1]),o=L.latLng(r[0],r[1]),s=L.latLngBounds(i,o);t.setMaxBounds(s),t.on("drag",function(){t.panInsideBounds(s,{animate:!1})})})}}}]),angular.module("bathy.toolbar",[]).directive("bathyToolbar",[function(){return{templateUrl:"bathy/toolbar/toolbar.html",controller:"toolbarLinksCtrl",transclude:!0}}]).controller("toolbarLinksCtrl",["$scope","configService",function(t,e){
var n=this;e.getConfig().then(function(t){n.links=t.toolbarLinks}),t.item="",t.toggleItem=function(e){t.item=t.item===e?"":e}}]),angular.module("bathy.wms",[]).directive("bathyWms",["$rootScope","$timeout","flashService","wmsService",function(t,e,n,a){return{scope:{data:"="},template:'<button type="button" class="undecorated" ng-show="data.services.hasWms()" ng-click="toggle(item)" title="Show/hide WMS layer." tooltip-placement="right" tooltip="View on map using WMS."><i ng-class="{active:data.isWmsShowing}" class="fa fa-lg fa-globe"></i></button>',link:function(e){e.$watch("data",function(t,e){t?a.subscribe(t):e&&a.unsubscribe(e)}),t.$on("hide.wms",function(t,n){e.data&&n===e.data.sysId&&e.data.isWmsShowing&&e.toggle()}),e.toggle=function(){e.data.isWmsShowing?a.hide(e.data):a.show(e.data)},e.$on("$destroy",function(){a.unsubscribe(e.data)})}}}]).factory("wmsService",["$http","$log","$q","$timeout","selectService","mapService",function(t,e,n,a,r,i){function o(e){var a,i="service/metadata/wmsLayernames";a=e.url.indexOf("?")>-1?e.url.substr(0,e.url.indexOf("?")):e.url,this.service=e,this.layerGroup=r.getLayerGroup(),this.wmsLayer=null,this.capabilities=null,this.toggleWms=function(){this.wmsLayer?this.clearWms():this.showWms()},this.showWms=function(){var r=function(){this.wmsLayer=L.tileLayer.wms(a,{layers:this.layerNames,format:"image/png",transparent:!0}).addTo(this.layerGroup)};if(this.wmsLayer&&this.clearWms(),!this.layerNames){if(!e.layerNames)return t.get(i,{params:{url:a},cache:!0}).then(function(t){this.layerNames=t.data,r.apply(this)}.bind(this));this.layerNames=e.layerNames}return n.when(r.apply(this))},this.clearWms=function(){return this.wmsLayer&&(this.layerGroup.removeLayer(this.wmsLayer),this.wmsLayer=null),null}}var s=(new X2JS,{});return{createLayer:function(t){return new o(t)},subscribe:function(t){var e=t.primaryId,n=t.services.getWms(),a=s[e];n&&(a?a.count+=1:a=s[e]={count:1,layer:this.createLayer(n)},1===a.count&&t.isWmsShowing&&(console.log("Reshow WMS layer"),this._showLayer(a.layer)),console.log("We have "+a.count+" subscribers"))},unsubscribe:function(t){var e=t.primaryId,n=s[e];n&&(n.count--,n.count||(console.log("Removing layer, deferred"),t.isWmsShowing&&this._hideLayer(n.layer)))},_showLayer:function(t){t&&t.showWms()},_hideLayer:function(t){t&&t.clearWms()},show:function(t){t.isWmsShowing=!0,this._showLayer(s[t.primaryId].layer)},hide:function(t){t.isWmsShowing=!1,this._hideLayer(s[t.primaryId].layer)}}}]);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),DatasetsService=function(){function t(e,n,a,r){var i=this;_classCallCheck(this,t),this.$http=e,this.configService=a,this.mapService=r,this._data={active:"groups"},this.getDatasets().then(function(t){i._data.types=t.data.available_data,i.makeList(),i.showTiles()})}return _createClass(t,[{key:"setBounds",value:function(t){var e=this;this._data.bounds=t;var n=t[2],a=t[3],r=t[0],i=t[1],o=1,s=0;this._data.list.forEach(function(t){var e=t.bbox[0],l=t.bbox[1];t.intersects=e[o]<n&&l[o]>r&&e[s]<a&&l[s]>i,t.downloadables.forEach(function(e){e.selected&=t.intersects})});var l=[[i,r],[a,n]];this.rectangle?this.rectangle.setBounds(l):this.mapService.getMap().then(function(t){e.rectangle=L.rectangle(l,{color:"#f80",weight:2}),e.rectangle.addTo(t)})}},{key:"zoom",value:function(t){this.mapService.getMap().then(function(e){var n=t.bbox,a=n[1][1],r=n[0][1],i=a-r,o=n[1][1]+i,s=[n[0],[n[1][0],o<180?o:180]];e.fitBounds(s,{animate:!0,padding:[80,80]})})}},{key:"show",value:function(t){var e=this;this.mapService.getMap().then(function(n){e._showDataset&&(n.removeLayer(e._showDataset),e._showDataset=null),t&&(e._showDataset=L.polygon(t.polygon,{color:"#f00"}),e._showDataset.addTo(n))})}},{key:"makeList",value:function(){var t=this._data.list=[],e={};this._data.types.forEach(function(n){var a=n.data_type;n.tiles.forEach(function(n){var r=n.bbox.split(",").map(function(t){return+t});n.bbox=[[r[1],r[0]],[r[3],r[2]]],n.polygon=[[r[1],r[0]],[r[1],r[2]],[r[3],r[2]],[r[3],r[0]],[r[1],r[0]]],n.intersects=!0,n.center=n.centre_pt.split(",").map(function(t){return+t}).reverse(),n.dataType=a,e[n.tile_id]||(t.push(n),e[n.tile_id]=!0)})}),console.log(this._data)}},{key:"showTiles",value:function(){var t=this,e=[];this._data.list.forEach(function(t){e.push(t.polygon)}),this.polys=L.multiPolygon(e,{color:"#dddddd",fill:!1,weight:1}),this.mapService.getMap().then(function(e){t.polys.addTo(e)})}},{key:"getDatasets",value:function(){var t=this;return this.configService.getConfig("datasets").then(function(e){return t.$http.get(e.datasetsUrl)})}},{key:"data",get:function(){return this._data}}]),t}();DatasetsService.$inject=["$http","$rootScope","configService","mapService"],angular.module("bathy.datasets",["bathy.datasets.type"]).directive("datasetsContainer",["$rootScope","datasetsService",function(t,e){return{templateUrl:"download/datasets/datasets.html",restrict:"AE",link:function(n){n.datasets=e.data,t.$on("bathy.bounds.draw",function(t,n){e.setBounds(n)})}}}]).service("datasetsService",DatasetsService).filter("spatialSort",[function(){return function(t){return t}}]),angular.module("bathy.datasets.type",[]).directive("datasetsType",["datasetsService",function(t){return{templateUrl:"download/datasets/type.html",restrict:"AE",scope:{name:"=",type:"="},link:function(e){e.show=function(e){t.show(e)},e.hide=function(){t.show(null)},e.zoom=function(e){t.zoom(e)}}}}]).filter("withinBounds",[function(){return function(t){return(t?t:[]).filter(function(t){return t.intersects})}}]).filter("sortFormat",function(){return function(t){return(t?t:[]).sort(function(t,e){return t.format>e.format})}}),angular.module("bathy.start",["bathy.datasets"]).directive("bathyDownload",[function(){return{templateUrl:"download/start/start.html",link:function(t,e,n){console.log("Hello select!")}}}]),angular.module("bathy.bbox",["geo.draw"]).directive("bathyBboxShowAll",["$rootScope","$timeout",function(t,e){return{link:function(n,a){a.on("click",function(){e(function(){t.$broadcast("bathybboxshowall")})})}}}]).directive("bathyBboxHideAll",["$rootScope",function(t){return{link:function(e,n){n.on("click",function(){t.$broadcast("bathybboxhideall")})}}}]).directive("bathyBboxShowVisible",["$rootScope","mapService",function(t,e){return{link:function(n,a){a.on("click",function(){e.getMap().then(function(e){t.$broadcast("bathybboxshowvisible",e.getBounds())})})}}}]).directive("bathyBbox",["$rootScope","bboxService",function(t,e){return{templateUrl:"wizard/bbox/bbox.html",scope:{data:"="},link:function(n,a){t.$on("bathybboxshowall",function(){n.data.hasBbox=!0}),t.$on("bathybboxhideall",function(){n.data.hasBbox=!1}),t.$on("bathybboxshowvisible",function(t,e){var a=n.data.bounds,r=e.getWest()<a.xMin&&e.getEast()>a.xMax&&e.getNorth()>a.yMax&&e.getSouth()<a.yMin;n.data.hasBbox=r}),n.$watch("data.hasBbox",function(t){t?e.draw(n.data).then(function(t){n.bbox=t}):n.bbox=e.remove(n.bbox)}),n.toggle=function(){n.data.hasBbox=!n.data.hasBbox},n.$on("$destroy",function(){n.data.hasBbox&&(n.bbox=e.remove(n.bbox))})}}}]).factory("bboxService",["mapService",function(t){var e="#ff7800";return{draw:function(n){var a=n.bbox.split(" "),r=[[+a[1],+a[0]],[+a[3],+a[2]]];return t.getMap().then(function(t){var n=L.rectangle(r,{fill:!1,color:e,weight:2,opacity:.8});return n.addTo(t),t.fitBounds(r),n})},remove:function(t){return t&&t._map.removeLayer(t),null}}}]);var DownloadCtrl=function(t){t.data().then(function(t){this.data=t}.bind(this)),this.remove=function(){t.clear()},this.changeEmail=function(e){t.setEmail(e)}};DownloadCtrl.$inject=["downloadService"];var DownloadService=function(t,e,n,a,r){var i="download_email",o="Download Layers",s={zoom:null,center:null,layer:null},l={email:null,item:null},c={getLayerGroup:function(){return a.getGroup(o)},setState:function(t){function e(){var e=[[t.bounds.yMin,t.bounds.xMin],[t.bounds.yMax,t.bounds.xMax]];s.layer&&a.getGroup(o).removeLayer(s.layer),t.queryLayer||(s.layer=L.rectangle(e,{color:"black",fill:!1}),a.getGroup(o).addLayer(s.layer))}function n(t){a.clearGroup(o),s.layer=null}t?e():n(map)},add:function(t){this.clear(),l.item=t,l.item.download=!0,t.processsing||(t.processing={clip:{xMax:null,xMin:null,yMax:null,yMin:null}})},clear:function(){l.item&&(l.item.download=!1,l.item=null)},setEmail:function(t){r.setItem(i,t)},getEmail:function(){return r.getItem(i).then(function(t){return l.email=t,t})},data:function(){return e.when(l)}};return c};DownloadService.$inject=["$http","$q","$rootScope","mapService","persistService"],angular.module("bathy.download",["bathy.geoprocess"]).directive("wizardPopup",["downloadService",function(t){return{restrict:"AE",templateUrl:"wizard/download/popup.html",link:function(e){t.data().then(function(n){e.data=n,e.$watch("data.item",function(n,a){n&&(e.stage="bbox"),(n||a)&&t.setState(n)})})}}}]).directive("wizardDownload",["downloadService",function(t){return{restrict:"AE",controller:"DownloadCtrl",templateUrl:"wizard/download/popup.html",link:function(){console.log("What the download...")}}}]).directive("bathyDownload",["downloadService",function(t){return{templateUrl:"bathy/download/download.html",controller:"DownloadCtrl",link:function(e,n){t.data().then(function(t){e.data=t}),e.$watch("data.item",function(e,n){(e||n)&&t.setState(e)})}}}]).directive("downloadAdd",["$rootScope","downloadService","flashService",function(t,e,n){return{template:"<button type='button' class='undecorated' ng-click='toggle()'><span class='fa-stack'  tooltip-placement='right' tooltip='Extract data.'><i class='fa fa-lg fa-download' ng-class='{active:item.download}'></i></span></button>",restrict:"AE",scope:{item:"=",group:"="},link:function(a,r){a.toggle=function(){a.item.download?e.clear(a.item):(n.add("Select an area of interest that intersects the highlighted areas."),e.add(a.item),a.group&&a.group.sysId&&t.$broadcast("hide.wms",a.group.sysId))}}}}]).directive("downloadEmail",["downloadService",function(t){return{template:'<div class="input-group"><span class="input-group-addon" id="bathy-email">Email</span><input required="required" type="email" ng-change="download.changeEmail(email)" ng-model="email" class="form-control" placeholder="Email address to send download link" aria-describedby="bathy-email"></div>',restrict:"AE",link:function(e,n){t.getEmail().then(function(t){e.email=t})}}}]).directive("downloadFilename",["flashService","downloadService",function(t,e){return{template:'<div class="input-group"><span class="input-group-addon" id="bathy-filename">Filename</span><input type="text" ng-maxlength="30" ng-trim="true" ng-keypress="restrict($event)" ng-model="data.filename" class="form-control" placeholder="Optional filename" aria-describedby="bathy-filename"><span class="input-group-addon" id="basic-addon2">.zip</span></div><div>Only up to 9 characters made up of alphanumeric or "_" allowed for file name</div>',restrict:"AE",scope:{data:"="},link:function(e,n){var a;e.restrict=function(e){var n=e.keyCode,r=String.fromCharCode(n).toUpperCase();n>31&&!r.match(/[\_A-Z0-9]/gi)?(t.remove(a),a=t.add('Only alphanumeric characters or "_" allowed in filename.',5e3),e.preventDefault()):n>31&&e.currentTarget.value&&e.currentTarget.value.length>=9&&(t.remove(a),a=t.add("Filename is restricted to 9 characters.",5e3),e.preventDefault())}}}}]).controller("DownloadCtrl",DownloadCtrl).factory("downloadService",DownloadService),angular.module("bathy.clip",["geo.draw"]).directive("clipInfoBbox",function(){return{restrict:"AE",templateUrl:"wizard/clip/infobbox.html"}}).directive("mapClip",["$rootScope","$timeout","clipService","messageService","mapService",function(t,e,n,a,r){return{templateUrl:"wizard/clip/clip.html",scope:{bounds:"=",trigger:"=",drawn:"&"},link:function(i,o){function s(e){var n=i.clip;n.xMax=+e.clip.xMax,n.xMin=+e.clip.xMin,n.yMax=+e.clip.yMax,n.yMin=+e.clip.yMin,t.$broadcast("bathy.clip.drawn",n)}var l=void 0;i.clip={xMax:null,xMin:null,yMax:null,yMin:null},i.typing=!1,"undefined"==typeof i.showBounds&&(i.showBounds=!1),r.getMap().then(function(t){i.$watch("bounds",function(t){t&&i.trigger?e(function(){i.initiateDraw()}):t||n.cancelDraw()})}),i.check=function(){e.cancel(l),l=e(function(){t.$broadcast("bathy.clip.drawn",i.clip)},4e3)},t.$on("bathy.clip.draw",function(t,n){n&&"oversize"===n.message?(i.oversize=!0,e(function(){delete i.oversize},6e3)):delete i.oversize,i.initiateDraw()}),i.initiateDraw=function(){a.info("Click on the map and drag to define your area of interest."),n.initiateDraw().then(s)}}}}]).factory("clipService",["$q","$rootScope","drawService",function(t,e,n){function a(t){return r.data={clip:{xMax:t.bounds.getEast().toFixed(5),xMin:t.bounds.getWest().toFixed(5),yMax:t.bounds.getNorth().toFixed(5),yMin:t.bounds.getSouth().toFixed(5)}},r.data}var r={initiateDraw:function(){return this.data=null,n.drawRectangle().then(a)},cancelDraw:function(){n.cancelDrawRectangle()}};return r}]);var GeoprocessService=function(t,e,n,a,r,i,o){function s(t){var e,n,a;return l.custom&&(e=l.custom[t.primaryId],e&&(n=e.key,a=e.templates[t[n]]))?a:l["default"]}var l,c,d="dems1sv1_0",u="service/log/geoprocess",h=null;return a.getConfig("initiateServiceTemplates").then(function(t){l=t}),i.getMap().then(function(t){c=t}),{queryLayer:function(t,n){var a=e.defer(),r=L.esri.featureLayer({url:t.url}),i=L.latLngBounds([n.yMin,n.xMin],[n.yMax,n.xMax]);return r.query().intersects(i).ids(function(t,e){t?a.reject(t):a.resolve(e)}),a.promise},outFormats:function(){return a.getConfig("processing").then(function(t){return t.outFormat})},handleShowClip:function(t){this.removeClip(),h=L.rectangle([[t.yMin,t.xMin],[t.yMax,t.xMax]],{weight:2,opacity:.9,fill:!1,color:"#000000",width:3,clickable:!1}),h.addTo(c)},removeClip:function(){h&&(c.removeLayer(h),h=null)},addLayer:function(t){return L.tileLayer.wms(t.parameters[0],t.parameters[1]).addTo(c)},removeLayer:function(t){c.removeLayer(t)},initiateJob:function(e,n){var a=d,i=s(e),o=e.processing,l={bbox:{yMin:o.clip.yMin,yMax:o.clip.yMax,xMin:o.clip.xMin,xMax:o.clip.xMax},geocatId:e.primaryId,crs:o.outCoordSys.code,format:o.outFormat.code};angular.forEach({basename:a,id:e.primaryId,yMin:o.clip.yMin,yMax:o.clip.yMax,xMin:o.clip.xMin,xMax:o.clip.xMax,outFormat:o.outFormat.code,outCoordSys:o.outCoordSys.code,filename:o.filename?o.filename:"",email:n},function(t,e){i=i.replace("${"+e+"}",t)}),$("#launcher")[0].src=i,r.setEmail(n),t.post(u,l),ga("send","event","bathy","click","FME data export: "+JSON.stringify(l))},getConfig:function(){return a.getConfig("processing")}}};GeoprocessService.$invoke=["$http","$q","$timeout","configService","downloadService","ga","mapService","downloadService"],angular.module("bathy.geoprocess",[]).directive("wizardGeoprocess",["$http","$q","$timeout","geoprocessService","flashService","messageService",function(t,e,n,a,r,i){return{restrict:"AE",templateUrl:"wizard/geoprocess/geoprocess.html",scope:{data:"="},link:function(o){function s(){l(),o.data.referenceLayer&&(v=a.addLayer(o.data.referenceLayer))}function l(){v&&a.removeLayer(v)}function c(t){var e=(t.xMax-t.xMin)*(t.yMax-t.yMin);return e<1e-11||t.xMax<t.xMin}function d(t){var e=Math.abs((t.xMax-t.xMin)*(t.yMax-t.yMin));return o.data.restrictSize&&e>o.data.restrictSize}function u(t,e){function n(t){return angular.isUndefined(t)||""===t||null===t}var a=!1,r=!1;return!(!e||n(t.xMax)||n(t.xMin)||n(t.yMax)||n(t.yMin))&&(r=a=+t.xMax<+e.xMin,a&&(t.xMax=+e.xMin),a=+t.xMax>+e.xMax,r=r||a,a&&(t.xMax=+e.xMax),a=+t.xMin<+e.xMin,r=r||a,a&&(t.xMin=+e.xMin),a=+t.xMin>+t.xMax,r=r||a,a&&(t.xMin=t.xMax),a=+t.yMax<+e.yMin,r=r||a,a&&(t.yMax=+e.yMin),a=+t.yMax>+e.yMax,r=r||a,a&&(t.yMax=+e.yMax),a=+t.yMin<+e.yMin,r=r||a,a&&(t.yMin=+e.yMin),a=+t.yMin>+t.yMax,r=r||a,a&&(t.yMin=+t.yMax),r)}function h(t){t.xMax=null===t.xMax?null:+t.xMax,t.xMin=null===t.xMin?null:+t.xMin,t.yMax=null===t.yMax?null:+t.yMax,t.yMin=null===t.yMin?null:+t.yMin}function p(t){return t&&angular.isNumber(t.xMax)&&angular.isNumber(t.xMin)&&angular.isNumber(t.yMax)&&angular.isNumber(t.yMin)&&!d(t)&&!c(t)}var g,f,v;a.outFormats().then(function(t){o.outFormats=t}),o.$watch("data",function(t,e){e&&(a.removeClip(),l()),t&&t!=e&&(o.stage="bbox",s())}),o.$watchGroup(["data.processing.clip.xMax","data.processing.clip.xMin","data.processing.clip.yMax","data.processing.clip.yMin"],function(o,l,c){function d(){var t=e.defer();if(u=c.drawn(),u&&u.code)switch(u.code){case"oversize":n(function(){r.remove(g),i.error("The selected area is too large to process. Please restrict to approximately "+Math.sqrt(c.data.restrictSize)+" degrees square."),c.stage="bbox",s(),t.resolve(u)});break;case"undersize":n(function(){r.remove(g),i.error("X Min and Y Min should be smaller than X Max and Y Max, respectively. Please update the drawn area."),c.stage="bbox",s(),t.resolve(u)});break;default:return e.when(u)}return t.promise}var u=void 0,h=void 0;f&&(n.cancel(f),f=null),c.data&&c.data.processing&&c.data.processing.clip&&null!==c.data.processing.clip.xMax&&(h=c.config.extentCheckTemplates[c.data.sysId],g=r.add("Validating selected area...",3e3),c.checkingOrFailed=!!h,f=n(function(){d().then(function(e){try{if(e&&"success"==e.code)if(h){var n=h.replace("{maxx}",o[0]).replace("{minx}",o[1]).replace("{maxy}",o[2]).replace("{miny}",o[3]);r.remove(g),g=r.add("Checking there is data in your selected area..."),t.get(n).then(function(t){t.data&&t.data.length>0&&(r.remove(g),t.data[0].Intersect===!1?(i.error("There is no data covering the drawn area currently in this resolution dataset.",6e3),c.stage="bbox",s()):(g=t.data[0].Intersect===!0?r.add('There is intersecting data. Click "Next" if you are ready to proceed.',5e3):r.add('Click "Next" if you are ready to proceed.',4e3),c.checkingOrFailed=!1,a.handleShowClip(c.data.processing.clip))),console.log(t)},function(t){c.checkingOrFailed=!1,a.handleShowClip(c.data.processing.clip),console.log("Service unavailable to check intersection")})}else a.handleShowClip(c.data.processing.clip),c.checkingOrFailed=!1}catch(l){c.checkingOrFailed=!1}})},2e3))}),o.drawn=function(){return a.removeClip(),h(o.data.processing.clip),u(o.data.processing.clip,o.data.bounds)&&(g=r.add("Redrawn to fit within data extent",5e3)),d(o.data.processing.clip)?{code:"oversize"}:c(o.data.processing.clip)?{code:"undersize"}:null===o.data.processing.clip.xMax?{code:"incomplete"}:p(o.data.processing.clip)?{code:"success"}:{code:"invalid"}},o.startExtract=function(){o.allDataSet()&&(i.info("Your request has been sent for processing. You will be notified by email on completion of the job."),r.add("You can select another area for processing.",1e4),a.initiateJob(o.data,o.email),o.data.download=!1)},o.allDataSet=function(){var t=o.data&&o.data.processing?o.data.processing:null;return t&&o.email&&p(t.clip)&&t.outCoordSys&&t.outFormat},o.validSansEmail=function(){var t=o.data&&o.data.processing?o.data.processing:null;return t&&p(t.clip)&&t.outCoordSys&&t.outFormat},o.validClip=function(t){return t&&t.processing&&p(t.processing.clip)},a.getConfig().then(function(t){o.config=t})}}}]).factory("geoprocessService",GeoprocessService).filter("sysIntersect",function(){return function(t,e){return e&&angular.isNumber(e.xMin)&&angular.isNumber(e.xMax)&&angular.isNumber(e.yMin)&&angular.isNumber(e.yMax)?t.filter(function(t){return!t.extent||t.extent.xMin<=e.xMin&&t.extent.xMax>=e.xMax&&t.extent.yMin<=e.yMin&&t.extent.yMax>=e.yMax}):t}});var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),SearchCtrl=function(){function t(e,n,a,r){var i=this;_classCallCheck(this,t),this.configService=n,this.flashService=a,this.searchService=r,e.$on("search.results.received",function(t,e){a.remove(i.flasher),i.data=e}),e.$on("more.search.results",function(){a.remove(i.flasher),i.flasher=a.add("Fetching more results",1e3,!0),r.more()}),n.getConfig("facets").then(function(t){i.hasKeywords=t&&t.keywordMapped&&t.keywordMapped.length>0})}return _createClass(t,[{key:"search",value:function(){this.flashService.remove(this.flasher),this.flasher=this.flashService.add("Searching",3e3,!0),this.searchService.setFilter(this.filter)}},{key:"toggle",value:function(t){this.searchService.toggle(t)}},{key:"toggleAll",value:function(){this.searchService.toggleAll(this.data.response.docs)}},{key:"showWithin",value:function(){this.searchService.showWithin(this.data.response.docs)}},{key:"allShowing",value:function(){return!(!this.data||!this.data.response)&&!this.data.response.docs.some(function(t){return!t.showLayer})}},{key:"anyShowing",value:function(){return!(!this.data||!this.data.response)&&this.data.response.docs.some(function(t){return t.showLayer})}},{key:"hideAll",value:function(){this.searchService.hideAll(this.data.response.docs)}},{key:"hilight",value:function(t){t.layer&&this.searchService.hilight(t.layer)}},{key:"lolight",value:function(t){t.layer&&this.searchService.lolight(t.layer)}}]),t}();SearchCtrl.$inject=["$rootScope","configService","flashService","searchService"];var SearchCriteriaCtrl=function(){function t(e){_classCallCheck(this,t),this.searchService=e,this.criteria=e.getSearchCriteria()}return _createClass(t,[{key:"refresh",value:function(){this.searchService.refresh()}}]),t}();SearchCriteriaCtrl.$inject=["searchService"],angular.module("bathy.search",["bathy.search.service"]).controller("SearchCtrl",SearchCtrl).controller("SearchCriteriaCtrl",SearchCriteriaCtrl).directive("bathySearch",[function(){return{templateUrl:"wizard/search/search.html"}}]).filter("pubDate",function(){return function(t){var e;return t?(e=new Date(t),e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()):"-"}}).filter("authors",function(){return function(t){return t?t.join(", "):"-"}}).filter("truncate",function(){return function(t,e){return t&&t.length>e-3?t.substr(0,e-3)+"...":t}}),angular.module("bathy.templates",[]).run(["$templateCache",function(t){t.put("bathy/daterange/daterange.html",'<div class="row" >\r\n\t<div class="col-md-5">\r\n\t\t<div class="form-inline">\r\n\t\t\t<label>\r\n\t\t\t\t<input id="daterangeslider" type="checkbox" ng-model="daterange.data.enabled" ng-click="change()"></input>\r\n\t\t\t\tRestrict to date range\r\n\t\t\t</label>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<div class="col-md-7" ng-show="daterange.data.enabled">\r\n\t\t<div class="bathyDaterange">\r\n\t\t\t<bathy-daterange-slider/>\r\n\t\t</div>\r\n\t\t<div class="row">\r\n\t\t\t<div class="col-md-12" style="text-align:center">\r\n\t\t\t\t<span class="pull-left">Earliest</span>\r\n\t\t\t\t<span ng-show="daterange.data.lower">{{daterange.data.lower}}</span> -\r\n\t\t\t\t<span ng-show="daterange.data.upper">{{daterange.data.upper}}</span>\r\n\t\t\t\t<span class="pull-right">Up to today</span>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),t.put("bathy/extent/extent.html",'<div class="row" style="border-top: 1px solid gray; padding-top:5px">\r\n\t<div class="col-md-5">\r\n\t\t<div class="form-inline">\r\n\t\t\t<label>\r\n\t\t\t\t<input id="extentEnable" type="checkbox" ng-model="parameters.fromMap" ng-click="change()"></input> \r\n\t\t\t\tRestrict area to map\r\n\t\t\t</label>\r\n\t\t</div>\r\n\t</div>\r\n\t \r\n\t<div class="col-md-7" ng-show="parameters.fromMap">\r\n\t\t<div class="container-fluid">\r\n\t\t\t<div class="row">\r\n\t\t\t\t<div class="col-md-offset-3 col-md-8">\r\n\t\t\t\t\t<strong>Y Max:</strong> \r\n\t\t\t\t\t<span>{{parameters.yMax | number : 4}}</span> \r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class="row">\r\n\t\t\t\t<div class="col-md-6">\r\n\t\t\t\t\t<strong>X Min:</strong>\r\n\t\t\t\t\t<span>{{parameters.xMin | number : 4}}</span> \r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="col-md-6">\r\n\t\t\t\t\t<strong>X Max:</strong>\r\n\t\t\t\t\t<span>{{parameters.xMax | number : 4}}</span> \r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class="row">\r\n\t\t\t\t<div class="col-md-offset-3 col-md-8">\r\n\t\t\t\t\t<strong>Y Min:</strong>\r\n\t\t\t\t\t<span>{{parameters.yMin | number : 4}}</span> \r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),t.put("bathy/elevation/elevation.html",'<div class="container-full elevationContainer" ng-show="geometry" style="background-color:white; opacity:0.9;padding:2px">\r\n\t<div class="row">\r\n\t\t<div class="col-md-4">\r\n\t\t\t<span class="graph-brand">Path Elevation</span>\r\n\t\t</div>\t\r\n\t\t<div class="col-md-8">\r\n\t\t\t<div class="btn-toolbar pull-right" role="toolbar" style="margin-right: 3px;">\r\n\t\t\t\t<div class="btn-group" ng-show="intersectsWaterTable">\t\r\n\t\t\t\t\t<button type="button" class="btn btn-default" ng-click="toggleWaterTable()" \r\n\t\t\t\t\t\t\ttitle="Show groundwater over elevation">{{paths.length == 1?\'Show\':\'Hide\'}} Water Table</button>\r\n\t\t\t\t</div>\t\r\n\t\t\t\t<div class="btn-group">\t\r\n\t\t\t\t\t<button type="button" class="btn btn-default" title="Find out information about the data behind these graphs" \r\n\t\t\t\t\t\t\tng-click="showInfo = !showInfo">\r\n\t\t\t\t\t\t<i class="fa fa-info-circle" role="presentation" style="font-size:16px; color:black"></i>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<exp-info title="Graph Information" style="width:400px;position:absolute;bottom:-80px;right:60px" show-close="true" is-open="showInfo"><div mars-info-elevation></div></exp-info>\t\t\t\t\r\n\t\t\t\t\t<button type="button" class="btn btn-default" title="Close graphs" ng-click="close()">\r\n\t\t\t\t\t\t<i class="fa fa-times-circle" role="presentation" style="font-size:16px; color:black"></i>\r\n\t\t\t\t\t</button>\t\t\t\t\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\t\r\n\t</div>\r\n\t<div explorer-graph data="paths" config="config" click="graphClick(event)" move="graphMove(event)" leave="graphLeave(event)" enter="graphEnter(event)" show-zero-line="true"></div>\r\n\t<div exp-point-features features="featuresUnderPoint" class="featuresUnderPoint"></div>\r\n\t<div exp-point point="point" class="featuresInfo" style="display:none"></div>\r\n\t<div class="elevationHoverPanel" mars-point-info ng-show="position"\r\n\t\tng-attr-style="top:{{position.pageY - 70}}px;left:{{position.pageX * 0.94 - 10}}px;">\r\n\t\t<div class="ng-binding"><strong>Elev.:</strong>{{position.point.z|number:0}}m</div>\r\n\t\t<div class="ng-binding"><strong>Dist.:</strong>{{length * position.percentX * 0.01|length : true }}</div>\r\n\t</div>\r\n\t</div>\r\n</div>'),t.put("bathy/elevation/elevationInfo.html",'<div>\r\nThe elevation graph is calculated from the 3" DEM data. \r\nThe data is held in a grid with a cell size of approx. 90 m. \r\nThe data has a &plusmn;5 m error. Full metadata about the data and how to acquire the data can be found \r\n<a target="_blank" href="http://www.ga.gov.au/metadata-gateway/metadata/record/gcat_aac46307-fce9-449d-e044-00144fdd4fa6">here</a>\r\n<br/>\r\nIf the path of the graph intersects areas that we have prepared water table data there will be the ability to plot this data. \r\nThe accuracy is not as high as the elevation data and has &plusmn;50 m error. Smoothing with this error can make the \r\nwater table appear above the elevation of the surface on occasions. \r\nData availability will be indicated by the button labelled "Show Water Table". \r\n<a href="javascript:;" ng-click="toggleWaterTableShowing()">Click to {{state.isWaterTableShowing?\'hide\':\'view\'}} the water table extent.</a>\r\n</div>'),t.put("bathy/glossary/glossary.html",'<div ng-controller="GlossaryCtrl as glossary">\r\n   <div style="position:relative;padding:5px;padding-left:10px;">\r\n      <div class="panel-heading">\r\n         <h3 class="panel-title">Glossary</h3>\r\n      </div>\r\n      <div class="panel-body">\r\n         <table class="table table-striped">\r\n            <thead>\r\n               <tr>\r\n                  <th>Term</th>\r\n                  <th>Definition</th>\r\n               </tr>\r\n            </thead>\r\n            <tbody>\r\n               <tr ng-repeat="term in glossary.terms">\r\n                  <td>{{term.term}}</td>\r\n                  <td>{{term.definition}}</td>\r\n               </tr>\r\n            </tbody>\r\n         </table>\r\n      </div>\r\n   </div>'),t.put("bathy/header/header.html",'<div class="container-full common-header" style="padding-right:10px; padding-left:10px">\r\n    <div class="navbar-header">\r\n\r\n        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".ga-header-collapse">\r\n            <span class="sr-only">Toggle navigation</span>\r\n            <span class="icon-bar"></span>\r\n            <span class="icon-bar"></span>\r\n            <span class="icon-bar"></span>\r\n        </button>\r\n\r\n        <a href="http://www.ga.gov.au" class="hidden-xs"><img src="data:image/png;base64,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" alt="Australian Government - Geoscience Australia" class="logo"></img></a>\r\n        <a href="http://www.ga.gov.au" class="visible-xs"><img src="data:image/png;base64,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" alt="Australian Government - Geoscience Australia" class="logo-stacked"></img></a>\r\n        <a href="/" class="appTitle visible-xs">\r\n            <h1 style="font-size:120%">{{heading}}</h1>\r\n        </a>\r\n    </div>\r\n    <div class="navbar-collapse collapse ga-header-collapse">\r\n        <ul class="nav navbar-nav">\r\n            <li class="hidden-xs"><a href="/"><h1 class="applicationTitle">{{heading}}</h1></a></li>\r\n        </ul>\r\n        <ul class="nav navbar-nav navbar-right nav-icons">\r\n\t\t\t<li mars-version-display role="menuitem" style="padding-top: 19px;"></li>\r\n\t\t\t<li style="width:10px"></li>\r\n        </ul>\r\n    </div><!--/.nav-collapse -->\r\n</div>\r\n\r\n<!-- Strap -->\r\n<div class="row">\r\n    <div class="col-md-12">\r\n        <div class="strap-blue">\r\n        </div>\r\n        <div class="strap-white">\r\n        </div>\r\n        <div class="strap-red">\r\n        </div>\r\n    </div>\r\n</div>'),
t.put("bathy/help/faqs.html",'<div class="container" >\r\n\t<p style="text-align: left; margin: 10px; font-size: 14px;">\r\n\t\t<strong>FAQS</strong>\r\n\t</p>\r\n\r\n\t<h6 ng-repeat="faq in faqs"><button type="button" class="undecorated" ng-click="focus(faq.key)">{{faq.question}}</button></h6>\r\n\t<hr/>\r\n\t<div class="row" ng-repeat="faq in faqs">\r\n\t\t<div class="col-md-12">\r\n\t\t\t<h6 tabindex="0" id="faqs_{{faq.key}}">{{faq.question}}</h6>\r\n\t\t\t<span ng-bind-html="faq.answer"></span>\r\n\t\t\t<hr/>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),t.put("bathy/help/help.html",'<div ng-controller="HelpCtrl as help">\r\n\t<div style="position:relative;padding:5px;padding-left:10px;" >\r\n\t\t<div style="padding:5px;" >\r\n\t\t\t<div class="panel-heading">\r\n\t\t\t\t<h3 class="panel-title">Help</h3>\r\n\t\t\t</div>\r\n\t\t\t<div class="panel-body">\r\n\t\t\t\tThe steps to get data!\r\n\t\t\t\t<ol>\r\n\t\t\t\t\t<li>Select dataset of interest <i class="fa fa-download"></i> from Select tab</li>\r\n\t\t\t\t\t<li>Define area</li>\r\n\t\t\t\t\t<li>Select output format</li>\r\n\t\t\t\t\t<li>Select coordinate system</li>\r\n\t\t\t\t\t<li>Enter email address</li>\r\n\t\t\t\t\t<li>Submit entries</li>\r\n\t\t\t\t</ol>\r\n\t\t\t\tAn email will be sent to you on completion of the data extract with a link to your data.\r\n\t\t\t\t<bathy-faqs faqs="help.faqs" ></bathy-faqs>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),t.put("bathy/legend/button.html",'<button type="button" class="map-tool-toggle-btn" title="Show the topography legend" ng-click="toggle()">\r\n   <span class="hidden-sm">Basemap Legend</span>\r\n   <img src="bathy/resources/img/view-details.png" class="toolbar-icon"/>\r\n</button>'),t.put("bathy/legend/legend.html",'<div class="panel-inner-container">\r\n    <h4 class="ng-binding">Map Legend</h4>\r\n    <img ng-src="bathy/resources/img/AustralianTopogaphyLegend.png" src="img/AustralianTopogaphyLegend.png">\r\n</div>'),t.put("bathy/maps/maps.html",'<div  ng-controller="MapsCtrl as maps">\r\n\t<div style="position:relative;padding:5px;padding-left:10px;" >\r\n\t\t<div class="panel panel-default" style="padding:5px;" >\r\n\t\t\t<div class="panel-heading">\r\n\t\t\t\t<h3 class="panel-title">Layers</h3>\r\n\t\t\t</div>\r\n\t\t\t<div class="panel-body">\r\n\t\t\t\t<div class="container-fluid">\r\n\t\t\t\t\t<div class="row" ng-repeat="layer in layersTab.layers" \r\n\t\t\t\t\t\t\tstyle="padding:7px;padding-left:10px;position:relative" ng-class-even="\'even\'" ng-class-odd="\'odd\'">\r\n\t\t\t\t\t\t<div style="position:relative;left:6px;">\r\n\t\t\t\t\t\t\t<a href="{{layer.metadata}}" target="_blank" \r\n\t\t\t\t\t\t\t\t\tclass="featureLink" title=\'View metadata related to "{{layer.name}}". (Opens new window.)\'>\r\n\t\t\t\t\t\t\t\t{{layer.name}}\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t<div class="pull-right" style="width:270px;" tooltip="Show on map. {{layer.help}}">\r\n\t\t\t\t\t\t\t\t<span style="padding-left:10px;width:240px;" class="pull-left"><explorer-layer-slider layer="layer.layer"></explorer-layer-slider></span>\r\n\t\t\t\t\t\t\t\t<button style="padding:2px 8px 2px 2px;" type="button" class="undecorated featureLink pull-right" href="javascript:;" \r\n\t\t\t\t\t\t\t\t\t\tng-click="maps.toggleLayer(layer)" >\r\n\t\t\t\t\t\t\t\t\t<i class="fa" ng-class="{\'fa-eye-slash\':(!layer.displayed), \'fa-eye active\':layer.displayed}"></i>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),t.put("bathy/panes/panes.html",'<div class="contentContainer" class="col-md-12" style="padding-right:0">\r\n\t<div class="panesMapContainer" geo-map configuration="data.map"></div>\r\n   <div class="base-layer-controller">\r\n    \t<div geo-draw data="data.map.drawOptions" line-event="elevation.plot.data" rectangle-event="bounds.drawn"></div>\r\n      <geo-baselayer-control class="noPrint"></geo-baselayer-control>\r\n   </div>\r\n   <restrict-pan bounds="data.map.position.bounds"></restrict-pan>\r\n</div>'),t.put("bathy/reset/reset.html",'<button type="button" class="map-tool-toggle-btn" ng-click="reset()" title="Reset page">\r\n   <span class="hidden-sm">Reset</span>\r\n   <i class="fa fa-lg fa-refresh"></i>\r\n</button>'),t.put("bathy/select/doc.html",'<div ng-class-odd="\'odd\'" ng-class-even="\'even\'" ng-mouseleave="select.lolight(doc)" ng-mouseenter="select.hilight(doc)">\r\n\t<span ng-class="{ellipsis:!expanded}" tooltip-enable="!expanded" style="width:100%;display:inline-block;"\r\n\t\t\ttooltip-class="selectAbstractTooltip" tooltip="{{doc.abstract | truncate : 250}}" tooltip-placement="bottom">\r\n\t\t<button type="button" class="undecorated" ng-click="expanded = !expanded" title="Click to see more about this dataset">\r\n\t\t\t<i class="fa pad-right fa-lg" ng-class="{\'fa-caret-down\':expanded,\'fa-caret-right\':(!expanded)}"></i>\r\n\t\t</button>\r\n\t\t<download-add item="doc" group="group"></download-add>\r\n\t\t<bathy-wms data="doc"></bathy-wms>\r\n\t\t<bathy-bbox data="doc" ng-if="doc.showExtent"></bathy-bbox>\r\n\t\t<a href="http://www.ga.gov.au/metadata-gateway/metadata/record/{{doc.sysId}}" target="_blank" ><strong>{{doc.title}}</strong></a>\r\n\t</span>\r\n\t<span ng-class="{ellipsis:!expanded}" style="width:100%;display:inline-block;padding-right:15px;">\r\n\t\t{{doc.abstract}}\r\n\t</span>\r\n\t<div ng-show="expanded" style="padding-bottom: 5px;">\r\n\t\t<h5>Keywords</h5>\r\n\t\t<div>\r\n\t\t\t<span class="badge" ng-repeat="keyword in doc.keywords track by $index">{{keyword}}</span>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),t.put("bathy/select/group.html",'<div class="panel panel-default" style="margin-bottom:-5px;" >\r\n\t<div class="panel-heading"><bathy-wms data="group"></bathy-wms> <strong>{{group.title}}</strong></div>\r\n\t<div class="panel-body">\r\n   \t\t<div ng-repeat="doc in group.docs">\r\n   \t\t\t<select-doc doc="doc" group="group"></select-doc>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n'),t.put("bathy/select/select.html",'<div>\r\n\t<div style="position:relative;padding:5px;padding-left:10px;" ng-controller="SelectCtrl as select" class="scrollPanel">\r\n\t\t<div class="panel panel-default" style="margin-bottom:-5px">\r\n  \t\t\t<div class="panel-heading">\r\n  \t\t\t\t<h3 class="panel-title">Available datasets</h3>\r\n  \t\t\t</div>\r\n  \t\t\t<div class="panel-body">\r\n\t\t\t\t<div ng-repeat="doc in select.data.response.docs" style="padding-bottom:7px">\r\n\t\t\t\t\t<select-doc ng-if="doc.type == \'dataset\'" doc="doc"></select-doc>\r\n\t\t\t\t\t<select-group ng-if="doc.type == \'group\'" group="doc"></select-group>\r\n\t\t\t\t</div>\r\n  \t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),t.put("bathy/splash/splash.html",'<div class="modal-header">\r\n   <h3 class="modal-title splash">MH370 Bathymetry and  Backscatter Data</h3>\r\n</div>\r\n<div class="modal-body" id="accept" ng-form exp-enter="accept()" bathy-splash-modal style="width: 100%; margin-left: auto; margin-right: auto;">\r\n\t<div style="border-bottom:1px solid gray">\r\n\t\t<p>\r\n\t\t\tUsers can download the bathymetry data over the Indian Ocean which is licensed under Creative Commons.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tData can be downloaded from the portal at <strong>no charge</strong> and there is no limit to how many requests you can place (please check the file size before you download your results).\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tIf you need datasets in full, please contact <a href="clientservices@ga.gov.au">clientservices@ga.gov.au</a>.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t<a href="http://opentopo.sdsc.edu/gridsphere/gridsphere?cid=contributeframeportlet&gs_action=listTools" target="_blank">Click here for Free GIS Tools.</a>\r\n\t\t</p>\r\n\r\n\t\t<div style="padding:30px; padding-top:0; padding-bottom:40px; width:100%">\r\n\t\t\t<div class="pull-right">\r\n\t\t\t  \t<button type="button" class="btn btn-primary" ng-model="seenSplash" ng-focus ng-click="accept()">Continue</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div ng-show="messages.length > 0" class="container" style="width:100%; max-height:250px; overflow-y:auto">\r\n\t\t<div class="row" ng-class-even="\'grayline\'" style="font-weight:bold">\r\n\t\t\t<div class="col-sm-12" ><h3>News</h3></div>\r\n\t\t</div>\r\n\r\n\t\t<div class="row"ng-class-even="\'grayline\'" style="max-height:400px;overflow:auto" ng-repeat="message in messages | sortNotes">\r\n\t\t\t<div class="col-sm-12">\r\n\t\t\t\t<h4>{{message.title}} <span class="pull-right" style="font-size:70%">Created: {{message.creationDate | date : "dd/MM/yyyy"}}</span></h4>\r\n\t\t\t\t<div ng-bind-html="message.description"></div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),t.put("bathy/side-panel/side-panel-left.html",'<div class="cbp-spmenu cbp-spmenu-vertical cbp-spmenu-left" style="width: {{left.width}}px;" ng-class="{\'cbp-spmenu-open\': left.active}">\r\n    <a href="" title="Close panel" ng-click="closeLeft()" style="z-index: 1200">\r\n        <span class="glyphicon glyphicon-chevron-left pull-right"></span>\r\n    </a>\r\n    <div ng-show="left.active === \'legend\'" class="left-side-menu-container">\r\n        <legend url="\'img/AustralianTopogaphyLegend.png\'" title="\'Map Legend\'"></legend>\r\n    </div>\r\n</div>'),t.put("bathy/side-panel/side-panel-right.html",'<div class="cbp-spmenu cbp-spmenu-vertical cbp-spmenu-right noPrint" style="width:{{right.width}}" ng-class="{\'cbp-spmenu-open\': right.active}">\r\n    <a href="" title="Close panel" ng-click="closePanel()" style="z-index: 1200">\r\n        <span class="glyphicon glyphicon-chevron-right pull-left"></span>\r\n    </a>\r\n    <div ng-show="right.active === \'datasets\'" class="right-side-menu-container">\r\n        <div class="panesTabContentItem" bathy-download ></div>\r\n    </div>\r\n    <div ng-if="right.active === \'glossary\'" class="right-side-menu-container">\r\n        <div class="panesTabContentItem" bathy-glossary></div>\r\n    </div>\r\n    <div ng-show="right.active === \'help\'" class="right-side-menu-container">\r\n        <div class="panesTabContentItem" bathy-help></div>\r\n    </div>\r\n</div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n'),t.put("bathy/side-panel/trigger.html",'<button ng-click="toggle()" type="button" class="map-tool-toggle-btn">\r\n   <span class="hidden-sm">{{name}}</span>\r\n   <i class="fa fa-lg" ng-class="iconClass"></i>\r\n</button>'),t.put("bathy/tabs/maps.html","Maps. htrml"),t.put("bathy/tabs/tabs.html",'<div ng-controller="tabsController">\r\n\r\n\t<!-- resize handle -->\r\n\t<div ng-mousedown="catchResize()" ng-hide="view === \'\'" class=\'x-resize\'></div>\r\n\r\n\t<!-- tabs go here -->\r\n\t<div id="tabs-container" class="rotate-tabs" ng-style="{\'right\' : contentLeft +\'px\'}">\r\n\t\t<div class="tab-item" ng-click="setView(\'select\')" ng-class="{\'bold\': view == \'select\'}" ng-keydown="$event.which === 13 && setView(\'select\')" tabindex="0">Datasets</div>\r\n\t\t<!--\r\n\t\t<div class="tab-item" ng-click="setView(\'search\')" ng-class="{\'bold\': view == \'search\'}" ng-keydown="$event.which === 13 && setView(\'search\')" tabindex="0">Search</div>\r\n\t\t<div class="tab-item" ng-click="setView(\'maps\')" ng-class="{\'bold\': view == \'maps\'}" ng-keydown="$event.which === 13 && setView(\'maps\')" tabindex="0">Layers</div>\r\n\t\t-->\r\n\t\t<div class="tab-item" ng-click="setView(\'download\')" ng-controller="DownloadCtrl as download" ng-class="{\'bold\': view == \'download\'}" ng-keydown="$event.which === 13 && setView(\'download\')" tabindex="0">Orders <strong ng-show="download.data.count">({{download.data.count}})</strong></div>\r\n\t\t<div class="tab-item" ng-click="setView(\'glossary\')" ng-class="{\'bold\': view == \'glossary\'}" ng-keydown="$event.which === 13 && setView(\'glossary\')" tabindex="0">Glossary</div>\r\n\t\t<div class="tab-item" ng-click="setView(\'help\')" ng-class="{\'bold\': view == \'help\'}" ng-keydown="$event.which === 13 && setView(\'help\')" tabindex="0">Help</div>\r\n\t</div>\r\n\r\n\t<!-- directives go here -->\r\n\t<div id="tabs-content-container" ng-style="{\'width\' : contentWidth + \'px\'}">\r\n\t\t<div class="tab-content-item" ng-show="view == \'select\'" bathy-select></div>\r\n\t\t<div class="tab-content-item" ng-show="view == \'search\'" bathy-search auto-scroll=".scrollPanel" trigger="more.search.results"></div>\r\n\t\t<div class="tab-content-item" ng-show="view == \'maps\'" bathy-maps></div>\r\n\t\t<div class="tab-content-item" ng-show="view == \'glossary\'" bathy-glossary></div>\r\n\t\t<div class="tab-content-item" ng-show="view == \'help\'" bathy-help></div>\r\n\t\t<div class="tab-content-item" ng-show="view == \'download\'" bathy-download></div>\r\n\t</div>\r\n</div>\r\n'),t.put("bathy/toolbar/toolbar.html",'<div class="bathy-toolbar noPrint">\r\n    <div class="toolBarContainer">\r\n        <div>\r\n            <ul class="left-toolbar-items"></ul>\r\n            <ul class="right-toolbar-items">\r\n                <li>\r\n                    <panel-trigger panel-id="datasets" panel-width="540px" name="Downloads" icon-class="fa-download" default="true"></panel-trigger>\r\n                </li>\r\n                <li>\r\n                    <panel-trigger panel-id="glossary" panel-width="500px" name="Glossary" icon-class="fa-list-ul"></panel-trigger>\r\n                </li>\r\n                <li>\r\n                    <panel-trigger panel-id="help" panel-width="500px" name="Help" icon-class="fa-question"></panel-trigger>\r\n                </li>\r\n                <li reset-page></li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</div>'),t.put("download/datasets/datasets.html",'<div ng-show="datasets.bounds">\r\n   <div class="datasets-group" ng-if="datasets.active == \'groups\'">\r\n      <datasets-type ng-repeat="value in datasets.types" type="value" name="value.data_type" />\r\n   </div>\r\n   <div class="datasets-list" ng-if="datasets.active == \'list\'">\r\n      <datasets-list ng-repeat="item in datasets.list" item="item" />\r\n   </div>\r\n</div>'),t.put("download/datasets/type.html",'<div class="dataset-group">\r\n   <h4>{{name}}</h4>\r\n   <div class="dataset-subgroup" ng-repeat="tile in type.tiles | withinBounds"\r\n               ng-mouseenter="show(tile)" ng-mouseleave="hide()">\r\n      <h5 ng-click="zoom(tile)">Tile ID: {{tile.tile_id}}</h5>\r\n      <div>\r\n         <div class="dataset-item" ng-repeat="format in tile.downloadables | sortFormat">\r\n            <input type="checkbox" ng-model="format.selected"> <span style="width:8em; display: inline-block">{{format.format}}</span> ({{format.file_size | bytes}})\r\n         </div>\r\n      </div>\r\n   </div>\r\n</div>'),t.put("download/start/start.html","<div>\r\n   <map-clip></map-clip>\r\n   <datasets-container></datasets-container>\r\n</div>"),t.put("wizard/bbox/bbox.html",'<button type="button" class="undecorated" ng-click="toggle()" tooltip-placement="right" tooltip="Show data extent on the map.">\r\n\t<i class="fa pad-right fa-lg" ng-class="{\'fa-eye orange\':data.hasBbox,\'fa-eye-slash\':!data.hasBbox}"></i>\r\n</button>'),t.put("wizard/download/download.html",'<exp-modal ng-controller="DownloadCtrl as dl" icon-class="fa-download" is-open="dl.data.item.download" title="Download data" on-close="dl.remove()" is-modal="true">\r\n\t<div style="padding:5px;">\r\n\t\t<div class="row">\r\n  \t\t\t<div class="col-md-12">\r\n\t\t\t\t<h4><bathy-wms data="dl.data.item"></bathy-wms>{{dl.data.item.title}}</h4>\r\n\t\t\t\t{{dl.data.item.abstract}}\r\n   \t\t\t</div>\r\n\t\t</div>\r\n\t\t<bathy-geoprocess data="dl.data.item"></bathy-geoprocess>\r\n\t</div>\r\n</exp-modal>'),t.put("wizard/download/popup.html",'<exp-modal icon-class="fa-download"  is-open="data.item.download" title="Download wizard" on-close="dl.remove()">\r\n\t<div class="container-fluid downloadInner" >\r\n\t\t<div class="row">\r\n  \t\t\t<div class="col-md-12">\r\n\t\t\t\t<h4><bathy-wms data="dl.data.item"></bathy-wms>\r\n\t\t\t\t\t<a href="http://www.ga.gov.au/metadata-gateway/metadata/record/{{dl.data.item.sysId}}" target="_blank"><strong class="ng-binding">{{dl.data.item.title}}</strong></a>\r\n\t\t\t\t</h4>\r\n   \t\t\t</div>\r\n\t\t</div>\r\n\t\t<wizard-geoprocess data="dl.data.item"></wizard-geoprocess>\r\n\t</div>\r\n</exp-modal>'),t.put("wizard/clip/clip.html",'<div class="well well-sm" style="margin-bottom:5px">\r\n\t<div class="container-fluid">\r\n\t\t<div class="row">\r\n\t\t\t<div class="col-md-12" style="padding:0">\r\n\t\t\t\t<div class="" role="group" aria-label="...">\r\n\t\t\t\t\t<button ng-click="initiateDraw()" ng-disable="client.drawing"\r\n                      tooltip-append-to-body="true" tooltip-placement="bottom" uib-tooltip="Enable drawing of a bounding box. On enabling, click on the map and drag diagonally"\r\n\t\t\t\t\t\tclass="btn btn-primary btn-default">Select an area...</button>\r\n\t\t\t\t\t<button ng-click="showInfo = !showInfo" tooltip-placement="bottom" uib-tooltip="Information." style="float:right" class="btn btn-primary btn-default"><i class="fa fa-info"></i></button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<exp-info title="Selecting an area" show-close="true" style="width:450px;position:fixed;top:200px;right:40px" is-open="showInfo">\r\n\t\t\t\t\t<clip-info-bbox></clip-info-bbox>\r\n\t\t\t\t</exp-info>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div ng-show="oversize" style="margin-top:6px">\r\n\t\t\t<div class="alert alert-danger"\r\n            style="padding:2px; margin-bottom:0px" role="alert">Please restrict the size of your selected area to no more than 12 square degrees.</div>\r\n\t\t</div>\r\n\r\n\t\t<div class="row" ng-hide="(!clip.xMin && clip.xMin != 0) || oversize" style="padding-top:7px;">\r\n\t\t\t<div class="col-md-12">\r\n\t\t\t\tSelected bounds: {{clip.xMin|number : 4}}&deg; west, {{clip.yMax|number : 4}}&deg; north, {{clip.xMax|number : 4}}&deg; east, {{clip.yMin|number\r\n\t\t\t\t: 4}}&deg; south\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="container-fluid" style="padding-top:7px" ng-show="typing">\r\n\t\t<div class="row">\r\n\t\t\t<div class="col-md-3"> </div>\r\n\t\t\t<div class="col-md-8">\r\n\t\t\t\t<div style="font-weight:bold;width:3.5em;display:inline-block">Y Max:</div>\r\n\t\t\t\t<span>\r\n               <input type="text" style="width:6em" ng-model="clip.yMax" ng-change="check()"></input>\r\n               <span ng-show="showBounds && bounds">({{bounds.yMax|number : 4}} max)</span>\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="row">\r\n\t\t\t<div class="col-md-6">\r\n\t\t\t\t<div style="font-weight:bold;width:3.5em;display:inline-block">X Min:</div>\r\n\t\t\t\t<span>\r\n               <input type="text" style="width:6em" ng-model="clip.xMin" ng-change="check()"></input>\r\n               <span ng-show="showBounds && bounds">({{bounds.xMin|number : 4}} min)</span>\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t\t<div class="col-md-6">\r\n\t\t\t\t<div style="font-weight:bold;width:3.5em;display:inline-block">X Max:</div>\r\n\t\t\t\t<span>\r\n               <input type="text" style="width:6em" ng-model="clip.xMax" ng-change="check()"></input>\r\n               <span ng-show="showBounds && bounds">({{bounds.xMax|number : 4}} max)</span>\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="row">\r\n\t\t\t<div class="col-md-offset-3 col-md-8">\r\n\t\t\t\t<div style="font-weight:bold;width:3.5em;display:inline-block">Y Min:</div>\r\n\t\t\t\t<span>\r\n               <input type="text" style="width:6em" ng-model="clip.yMin" ng-change="check()"></input>\r\n               <span ng-show="showBounds && bounds">({{bounds.yMin|number : 4}} min)</span>\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),t.put("wizard/clip/infobbox.html",'<div class="">\r\n\t<strong style="font-size:120%">Select an area of interest.</strong>\r\n   By hitting the "Select an area..." button an area on the map can be selected with the mouse by clicking a\r\n   corner and while holding the left mouse button\r\n\tdown drag diagonally across the map to the opposite corner.\r\n\t<br/>\r\n\tClicking the "Select an area..." button again allows replacing a previous area selection. <br/>\r\n\t<strong>Notes:</strong>\r\n   <ul>\r\n      <li>The data does not cover all of Australia.</li>\r\n      <li>Restrict a search area to below four square degrees. eg 2x2 or 1x4</li>\r\n   </ul>\r\n\t<p style="padding-top:5px"><strong>Hint:</strong> If the map has focus, you can use the arrow keys to pan the map.\r\n\t\tYou can zoom in and out using the mouse wheel or the "+" and "-" map control on the top left of the map. If you\r\n\t\tdon\'t like the position of your drawn area, hit the "Draw" button and draw a new bounding box.\r\n\t</p>\r\n</div>'),t.put("wizard/geoprocess/geoprocess.html",'<div class="container-fluid fred" ng-form>\r\n\t<div ng-show="stage==\'bbox\'">\t\r\n\t\t<div class="row">\r\n\t\t\t<div class="col-md-12">\r\n\t\t\t\t<wizard-clip trigger="stage == \'bbox\'" drawn="drawn()" clip="data.processing.clip" bounds="data.bounds"></wizard-clip> \r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="row" style="height:55px">\r\n \t\t\t<div class="col-md-12">\r\n\t\t\t\t<button class="btn btn-primary pull-right" ng-disabled="!validClip(data) || checkingOrFailed" ng-click="stage=\'formats\'">Next</button>\r\n\t\t\t</div>\t\r\n\t\t</div>\r\n\t\t<div class="well">\r\n\t\t\t<strong style="font-size:120%">Select an area of interest.</strong> There are two ways to select your area of interest:\r\n\t\t\t<ol>\r\n\t\t\t\t<li>Draw an area on the map with the mouse by clicking a corner and while holding the left mouse button \r\n\t\t\t\t\tdown drag diagonally across the map to the opposite corner or</li>\r\n\t\t\t\t<li>Type your co-ordinates into the areas above.</li>\r\n\t\t\t</ol> \r\n\t\t\tOnce drawn the points can be modified by the overwriting the values above or drawing another area by clicking the draw button again. \r\n\t\t\tEnsure you select from the highlighted areas as the data can be quite sparse for some data.<br/>\r\n\t\t\t<p style="padding-top:5px">\r\n\t\t\t<strong>Warning:</strong> Some extracts can be huge. It is best if you start with a small area to experiment with first. An email will be sent \r\n\t\t\twith the size of the extract. Download judiciously. \r\n\t\t\t</p>\r\n\t\t\t<p style="padding-top"><strong>Hint:</strong> If the map has focus, you can use the arrow keys to pan the map. \r\n\t\t\t\tYou can zoom in and out using the mouse wheel or the "+" and "-" map control on the top left of the map. If you\r\n\t\t\t\tdon\'t like the position of your drawn area, hit the "Draw" button and draw a new bounding box.\r\n\t\t\t</p>\r\n\t\t</div>\t\t\t\t\r\n\t</div>    \t\t\r\n\r\n\t<div ng-show="stage==\'formats\'">\r\n\t\t<div class="well">\r\n\t\t<div class="row">\r\n  \t\t\t<div class="col-md-3">\r\n\t\t\t\t<label for="geoprocessOutputFormat">\r\n\t\t\t\t\tOutput Format\r\n\t\t\t\t</label>\r\n\t\t\t</div>\r\n\t\t\t<div class="col-md-9">\r\n\t\t\t\t<select id="geoprocessOutputFormat" style="width:95%" ng-model="data.processing.outFormat" ng-options="opt.value for opt in config.outFormat"></select>  \t\t\t\t\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="row">\r\n\t\t\t<div class="col-md-3">\r\n\t\t\t\t<label for="geoprocessOutCoordSys">\r\n\t\t\t\t\tCoordinate System\t\t\t\t\t\r\n\t\t\t\t</label>\r\n\t\t\t</div>\r\n\t\t\t<div class="col-md-9">\r\n\t\t\t\t<select id="geoprocessOutCoordSys" style="width:95%" ng-model="data.processing.outCoordSys" ng-options="opt.value for opt in config.outCoordSys | sysIntersect : data.processing.clip"></select>  \t\t\t\t\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="row" style="height:55px">\r\n\t\t\t<div class="col-md-6">\r\n\t\t\t\t<button class="btn btn-primary" ng-click="stage=\'bbox\'">Previous</button>\r\n\t\t\t</div>\t\r\n\t\t\t<div class="col-md-6">\r\n\t\t\t\t<button class="btn btn-primary pull-right" ng-disabled="!validSansEmail(data)" ng-click="stage=\'email\'">Next</button>\r\n   \t\t\t</div>\r\n\t\t</div>\r\n\t\t\r\n\t\t<div class="well">\r\n\t\t\t<strong style="font-size:120%">Data representation.</strong> Select how you want your data presented.<br/>\r\n\t\t\tOutput format is the structure of the data and you should choose a format compatible with the tools that you will use to manipulate the data.\r\n\t\t\t<ul>\r\n\t\t\t\t<li ng-repeat="format in outFormats"><strong>{{format.value}}</strong> - {{format.description}}</li>\r\n\t\t\t</ul> \r\n\t\t\tSelect what <i>coordinate system</i> or projection you would like. If in doubt select WGS84.<br/>\r\n\t\t\tNot all projections cover all of Australia. If the area you select is not covered by a particular projection then the option to download in that projection will not be available.\r\n\t\t</div>\t\r\n\t</div>\r\n\t\r\n\t<div ng-show="stage==\'email\'">\r\n\t\t<div class="well" exp-enter="stage=\'confirm\'">\r\n\t\t\t<div download-email></div>\r\n\t\t\t<br/>\r\n\t\t\t<div download-filename data="data.processing"></div>\r\n\t\t</div>\r\n\t\t<div class="row" style="height:55px">\r\n\t\t\t<div class="col-md-6">\r\n\t\t\t\t<button class="btn btn-primary" ng-click="stage=\'formats\'">Previous</button>\r\n\t\t\t</div>\t\r\n\t\t\t<div class="col-md-6">\r\n\t\t\t\t<button class="btn btn-primary pull-right" ng-disabled="!allDataSet(data)" ng-click="stage=\'confirm\'">Submit</button>\r\n   \t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="well">\r\n\t\t\t<strong style="font-size:120%">Email notification</strong> The extract of data can take some time. By providing an email address we will be able to notify you when the job is complete. The email will provide a link to the extracted \r\n\t\t\tdata which will be packaged up as a single file. To be able to proceed you need to have provided:\r\n\t\t\t<ul>\r\n\t\t\t\t<li>An area of interest to extract the data (referred to as a bounding box).</li>\r\n\t\t\t\t<li>An output format.</li>\r\n\t\t\t\t<li>A valid coordinate system or projection.</li>\r\n\t\t\t\t<li>An email address to receive the details of the extraction.</li>\r\n\t\t\t\t<li><strong>Note:</strong>Email addresses need to be and are stored in the system.</li>\r\n\t\t\t</ul>\r\n\t\t\t<strong style="font-size:120%">Optional filename</strong> The extract of data can take some time. By providing an optional filename it will allow you\r\n\t\t\tto associate extracted data to your purpose for downloading data. For example:\r\n\t\t\t<ul>\r\n\t\t\t\t<li>myHouse will have a file named myHouse.zip</li>\r\n\t\t\t\t<li>Sorrento would result in a file named Sorrento.zip</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t</div>\r\n\t\r\n\t<div ng-show="stage==\'confirm\'">\r\n\t\t<div class="row">\r\n\t\t\t<div class="col-md-12 abstractContainer">\r\n\t\t\t\t{{data.abstract}}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<h3>You have chosen:</h3>\r\n\t\t<table class="table table-striped">\r\n\t\t\t<tbody>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th>Area</th>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<span style="display:inline-block; width: 10em">Lower left (lat/lng&deg;):</span> {{data.processing.clip.yMin | number : 6}}, {{data.processing.clip.xMin | number : 6}}<br/>\r\n\t\t\t\t\t\t<span style="display:inline-block;width: 10em">Upper right (lat/lng&deg;):</span> {{data.processing.clip.yMax | number : 6}}, {{data.processing.clip.xMax | number : 6}}\r\n\t\t\t\t\t</td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th>Output format</th>\r\n\t\t\t\t\t<td>{{data.processing.outFormat.value}}</td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th>Coordinate system</th>\r\n\t\t\t\t\t<td>{{data.processing.outCoordSys.value}}</td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th>Email address</th>\r\n\t\t\t\t\t<td>{{email}}</td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr ng-show="data.processing.filename">\r\n\t\t\t\t\t<th>Filename</th>\r\n\t\t\t\t\t<td>{{data.processing.filename}}</td>\r\n\t\t\t\t</tr>\r\n\t\t\t</tbody>\r\n\t\t</table>\r\n\t\t<div class="row" style="height:55px">\r\n\t\t\t<div class="col-md-6">\r\n\t\t\t\t<button class="btn btn-primary" style="width:6em" ng-click="stage=\'email\'">Back</button>\r\n\t\t\t</div>\t\r\n\t\t\t<div class="col-md-6">\r\n\t\t\t\t<button class="btn btn-primary pull-right" ng-click="startExtract()">Confirm</button>\r\n   \t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>'),t.put("wizard/search/search.html",'<div>\r\n<div style="position:relative;padding:5px;padding-left:10px;" ng-controller="SearchCtrl as search" class="scrollPanel">\r\n\t<p style="text-align: left; margin: 10px; font-size: 16px;">\r\n\t\t<strong>Search</strong>\r\n\t</p>\r\n\t<form class="form-horizontal">\r\n\t\t<div class="well">\r\n\t\t\t<div class="form-group">\r\n\t\t\t\t<label for="searchFilter" class="col-sm-1 control-label">Filter</label>\r\n\t\t\t\t<div class="col-sm-11">\r\n\t\t\t\t\t<input placeholder=\'Leave blank to match all, type to filter results\' type="text" class="form-control" ng-keyup="search.search()" ng-model="search.filter" ></input>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<span ng-show="search.data.response.docs">\r\n\t\t\t\t\t<strong>Showing</strong> {{search.data.response.docs.length}} of {{search.data.response.numFound}} <strong>matches. </strong>\r\n\t\t\t\t\t({{search.data.responseHeader.QTime/ 1000}} seconds)\r\n\t\t\t\t\t<span ng-show="search.data.responseHeader" class="pull-right">\r\n\r\n\t\t\t\t\t\t<div class="btn-group" dropdown style="padding-right:1em">\r\n\t\t\t\t\t\t\t<button type="button" class="undecorated" bathy-bbox-show-all style="padding-left:5em">\r\n\t\t\t\t\t\t\t\tShow all data extents\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t    <button type="button" class="undecorated dropdown-toggle" dropdown-toggle title="Restrict datasets based on area of coverage">\r\n        \t\t\t\t\t\t<span class="caret"></span>\r\n        \t\t\t\t\t\t<span class="sr-only">More options for showing and hiding datasets\' extents based on size and if only some are viewable.</span>\r\n      \t\t\t\t\t\t</button>\r\n      \t\t\t\t\t\t<ul class="dropdown-menu" role="menu">\r\n        \t\t\t\t\t\t<li><a role="button" href="javascript:;" bathy-bbox-show-visible  tooltip="Show only those datasets that have all of their data within the current viewable map">Show fully visible</a></li>\r\n        \t\t\t\t\t\t<li><a role="button" href="javascript:;" bathy-bbox-hide-all  tooltip="Hide all datasets\' bounding area. ">Hide all</a></li>\r\n      \t\t\t\t\t\t</ul>\r\n    \t\t\t\t\t</div>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<div class="container-fluid">\r\n\t\t\t\t\t<bathy-extent></bathy-extent>\r\n\t\t\t\t\t<bathy-facetenable></bathy-facetenable>\r\n\t\t\t\t\t<bathy-daterange></bathy-daterange>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</form>\r\n\r\n\t<div class="container" style="width:100%">\r\n\t\t<div class="row" ng-repeat="doc in search.data.response.docs">\r\n\t\t\t<div class="col-md-12"  ng-class-odd="\'odd\'" ng-class-even="\'even\'" ng-mouseleave="search.lolight(doc)" ng-mouseenter="search.hilight(doc)">\r\n\t\t\t\t<span ng-class="{ellipsis:!expanded}" style="width:100%;display:inline-block;">\r\n\t\t\t\t\t<button type="button" class="undecorated" ng-click="expanded = !expanded" title="Click to see more about this dataset" tooltip-placement="right" tooltip="Show more details.">\r\n\t\t\t\t\t\t<i class="fa pad-right fa-2x" ng-class="{\'fa-caret-down\':expanded,\'fa-caret-right\':(!expanded)}"></i>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<download-add item="doc"></download-add>\r\n\t\t\t\t\t<bathy-wms data="doc"></bathy-wms>\r\n\t\t\t\t\t<bathy-bbox data="doc" ng-if="doc.showExtent"></bathy-bbox>\r\n\t\t\t\t\t<a href="http://www.ga.gov.au/metadata-gateway/metadata/record/{{doc.sysId}}" target="_blank" ><strong>{{doc.title}}</strong></a>\r\n\t\t\t\t</span>\r\n\t\t\t\t<span ng-class="{ellipsis:!expanded}" style="width:100%;display:inline-block;padding-right:15px;"\r\n\t\t\t\t\t\ttooltip-enable="!expanded" tooltip-class="searchAbstractTooltip" tooltip="{{doc.abstract | truncate : 250}}" >\r\n\t\t\t\t\t<download-actions doc="doc" ng-show="expanded"></download-actions>\r\n\t\t\t\t\t{{doc.abstract}}\r\n\t\t\t\t</span>\r\n\t\t\t\t<div ng-show="expanded">\r\n\t\t\t\t\t<h6>Authors</h6>\r\n\t\t\t\t\t{{doc.author | authors}}\r\n\t\t\t\t\t<h6>Keywords</h6>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<span class="badge" ng-repeat="keyword in doc.keywords track by $index">{{keyword}}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n</div>');
}]);